#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: TEAM_SETUP</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/d1a/md__2github_2workspace_2ecosystem_2ai-tools_2mcp_2graphq-llm_2TEAM__SETUP.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">TEAM_SETUP</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1551"></a>
üöÄ Complete Team Setup Guide - GraphQ-LLM with Nexus Integration</h1>
<p><b>Purpose:</b> This guide will help you replicate the exact working setup from scratch. Follow each step in order to reach the current state of the project.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md1553"></a>
üîó Quick Reference - Repository Links</h2>
<h3><a class="anchor" id="autotoc_md1554"></a>
<b>Repositories to Clone:</b></h3>
<ol type="1">
<li><b>GraphQ-LLM</b> (this repository)<ul>
<li>Replace <code>&lt;repository-url&gt;</code> with your actual GraphQ-LLM repository URL</li>
<li>Contains: Main application code, Docker configs, documentation</li>
</ul>
</li>
<li><b>Nexus</b> (separate repository - must be cloned)<ul>
<li><b>URL:</b> <a href="https://github.com/sophiequynn/nexus.git">https://github.com/sophiequynn/nexus.git</a></li>
<li><b>Purpose:</b> Next.js frontend application</li>
<li><b>Note:</b> This fork includes GraphQ-LLM integration (see Step 7.6 for details.)</li>
</ul>
</li>
<li><b>ResilientDB</b> (reference only - using Docker image)<ul>
<li><b>URL:</b> <a href="https://github.com/apache/incubator-resilientdb">https://github.com/apache/incubator-resilientdb</a></li>
<li><b>Note:</b> We use the Docker image <code>expolab/resdb</code>, not cloning the repo.</li>
</ul>
</li>
<li><b>ResLens Frontend</b> (separate repository - optional)<ul>
<li><b>URL:</b> <a href="https://github.com/sophiequynn/incubator-resilientdb-ResLens.git">https://github.com/sophiequynn/incubator-resilientdb-ResLens.git</a></li>
<li><b>Purpose:</b> Performance monitoring dashboard UI</li>
<li><b>Note:</b> Forked from Apache ResLens project</li>
</ul>
</li>
<li><b>ResLens Middleware</b> (separate repository - optional)<ul>
<li><b>URL:</b> <a href="https://github.com/sophiequynn/incubator-resilientdb-ResLens-Middleware.git">https://github.com/sophiequynn/incubator-resilientdb-ResLens-Middleware.git</a></li>
<li><b>Purpose:</b> Performance monitoring API server</li>
<li><b>Note:</b> Forked from Apache ResLens project</li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md1555"></a>
<b>Key Documentation Files (in GraphQ-LLM repository):</b></h3>
<ul>
<li><code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> - Complete code for Nexus integration (Step 7.6)</li>
<li><code><a class="el" href="../../db/d40/TEST__QUERIES_8md.html">TEST_QUERIES.md</a></code> - Example queries for testing</li>
<li><code>FINAL_PHASES_AND_STEPS.md</code> - Project status and progress</li>
<li><code>WHY_INTEGRATE_RESLENS_NEXUS.md</code> - Integration rationale</li>
<li><code><a class="el" href="../../d8/d4e/TEST__DOCKER__SERVICES_8md.html">TEST_DOCKER_SERVICES.md</a></code> - Comprehensive testing guide for all Docker services</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1557"></a>
üìã Prerequisites Checklist</h2>
<p>Before starting, ensure you have:</p>
<ul class="check">
<li class="unchecked"><b>Docker</b> and <b>Docker Compose</b> installed</li>
</ul>
<ul class="check">
<li class="unchecked"><b>Git</b> installed</li>
</ul>
<ul class="check">
<li class="unchecked"><b>Node.js 18+</b> installed (for local development)</li>
</ul>
<ul class="check">
<li class="unchecked"><b>PostgreSQL</b> with pgvector (we'll set this up with Docker)</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1559"></a>
üîë Required API Keys</h2>
<p>Before starting, gather these API keys (some are optional but recommended):</p>
<h3><a class="anchor" id="autotoc_md1560"></a>
<b>Required:</b></h3>
<ul>
<li><b>Gemini API Key</b> (for LLM - currently using <code>gemini-2.5-flash-lite</code>)<ul>
<li>Get it from: <a href="https://makersuite.google.com/app/apikey">https://makersuite.google.com/app/apikey</a></li>
<li>Create a new API key and copy it</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1561"></a>
<b>Optional but Recommended:</b></h3>
<ul>
<li><b>Hugging Face API Key</b> (for faster model downloads)<ul>
<li>Get it from: <a href="https://huggingface.co/settings/tokens">https://huggingface.co/settings/tokens</a></li>
<li>Create a new token with read access</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1562"></a>
<b>Optional (for Nexus features):</b></h3>
<ul>
<li><b>DeepSeek API Key</b> - <a href="https://www.deepseek.com/">https://www.deepseek.com/</a> ‚Üí Sign up ‚Üí Get API key</li>
<li><b>LlamaCloud API Key</b> - <a href="https://cloud.llamaindex.ai/">https://cloud.llamaindex.ai/</a> ‚Üí Sign up ‚Üí Get API key</li>
<li><b>Supabase</b> (if using cloud PostgreSQL) - <a href="https://supabase.com">https://supabase.com</a> ‚Üí Create project</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1564"></a>
üéØ Step-by-Step Setup (Follow in Order)</h2>
<h3><a class="anchor" id="autotoc_md1565"></a>
<b>Step 1: Clone GraphQ-LLM Repository</b></h3>
<div class="fragment"><div class="line"># Clone the GraphQ-LLM repository</div>
<div class="line"># Replace &lt;repository-url&gt; with your actual repository URL</div>
<div class="line">git clone &lt;repository-url&gt;</div>
<div class="line">cd graphq-llm</div>
</div><!-- fragment --><p><b>Repository:</b> Replace <code>&lt;repository-url&gt;</code> with your GraphQ-LLM repository URL.</p>
<p><b>Verify:</b> You should see files like <code>package.json</code>, <code>src/</code>, <code>docs/</code>, <code>docker-compose.dev.yml</code>, etc.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md1567"></a>
<b>Step 2: Install Dependencies</b></h3>
<div class="fragment"><div class="line"># Install all Node.js dependencies</div>
<div class="line">npm install</div>
</div><!-- fragment --><p><b>Expected output:</b> All packages will be installed, including:</p><ul>
<li><code>@xenova/transformers</code> (for local LLM and embeddings)</li>
<li><code>@huggingface/inference</code> (for Hugging Face API)</li>
<li><code>@modelcontextprotocol/sdk</code> (for MCP server)</li>
<li>All other dependencies</li>
</ul>
<p><b>Time:</b> 2-5 minutes</p>
<hr  />
<h3><a class="anchor" id="autotoc_md1569"></a>
<b>Step 3: Create Environment File</b></h3>
<p>Create a <code>.env</code> file in the <code>graphq-llm</code> directory:</p>
<div class="fragment"><div class="line">cd /path/to/graphq-llm</div>
<div class="line">touch .env</div>
</div><!-- fragment --><p>Copy this exact configuration into <code>.env</code>:</p>
<div class="fragment"><div class="line"># GraphQ-LLM Environment Variables</div>
<div class="line"> </div>
<div class="line"># ResilientDB Configuration</div>
<div class="line"># For local development (ResilientDB running on host):</div>
<div class="line">RESILIENTDB_GRAPHQL_URL=http://localhost:5001/graphql</div>
<div class="line"># For Docker (ResilientDB in container):</div>
<div class="line"># RESILIENTDB_GRAPHQL_URL=http://resilientdb:5001/graphql</div>
<div class="line"># Note: GraphQL server runs on port 5001 (KV service is on port 18000)</div>
<div class="line"> </div>
<div class="line"># Nexus Configuration</div>
<div class="line">NEXUS_API_URL=http://localhost:3000</div>
<div class="line">NEXUS_API_KEY=</div>
<div class="line"> </div>
<div class="line"># ResLens Configuration (Live Mode - optional)</div>
<div class="line">RESLENS_LIVE_MODE=false</div>
<div class="line">RESLENS_POLL_INTERVAL=5000</div>
<div class="line"> </div>
<div class="line"># HTTP API Server Configuration (for GraphQ-LLM Backend)</div>
<div class="line"># This is the HTTP API server that Nexus connects to (not the MCP server)</div>
<div class="line">MCP_SERVER_PORT=3001</div>
<div class="line">MCP_SERVER_HOST=localhost</div>
<div class="line"># Note: MCP_SERVER_PORT is used by the HTTP API backend service</div>
<div class="line"># The MCP server itself uses stdio transport and runs as a separate service</div>
<div class="line"> </div>
<div class="line"># LLM Configuration</div>
<div class="line"># Using Gemini (recommended) or local LLM</div>
<div class="line">LLM_PROVIDER=gemini</div>
<div class="line">LLM_API_KEY=your_gemini_api_key_here</div>
<div class="line">LLM_MODEL=gemini-2.5-flash-lite</div>
<div class="line">LLM_ENABLE_LIVE_STATS=false</div>
<div class="line"> </div>
<div class="line"># Alternative: Using local LLM (no API key needed, but lower quality)</div>
<div class="line"># LLM_PROVIDER=local</div>
<div class="line"># LLM_API_KEY=</div>
<div class="line"># LLM_MODEL=Xenova/gpt2</div>
<div class="line"> </div>
<div class="line"># Embedding Configuration</div>
<div class="line"># Using local embeddings (Xenova/all-MiniLM-L6-v2) - no API key needed</div>
<div class="line">EMBEDDINGS_PROVIDER=local</div>
<div class="line"># Optional: Hugging Face API key for faster model downloads</div>
<div class="line">HUGGINGFACE_API_KEY=your_huggingface_key_here</div>
<div class="line"> </div>
<div class="line"># Logging</div>
<div class="line">LOG_LEVEL=info</div>
</div><!-- fragment --><p><b>Important:</b></p><ul>
<li>Replace <code>your_gemini_api_key_here</code> with your actual Gemini API key (required for LLM)</li>
<li>Replace <code>your_huggingface_key_here</code> with your actual Hugging Face API key (optional but recommended for faster model downloads)</li>
</ul>
<hr  />
<h3><a class="anchor" id="autotoc_md1571"></a>
<b>Step 4: Set Up ResilientDB and GraphQL Server</b></h3>
<p><b>What is the GraphQL Server?</b></p><ul>
<li>ResilientDB has two services:<ol type="1">
<li><b>KV Service</b> (port 18000) - Key-value storage</li>
<li><b>GraphQL Server</b> (port 5001) - GraphQL API for querying/storing data</li>
</ol>
</li>
<li>The GraphQL server is <b>required</b> for storing and retrieving document chunks</li>
<li>It's a Python Flask application that provides GraphQL mutations and queries</li>
</ul>
<p><b>‚ö†Ô∏è Important:</b> You do NOT need to clone the separate GraphQL repository (<code><a href="https://github.com/apache/incubator-resilientdb-graphql">https://github.com/apache/incubator-resilientdb-graphql</a></code>). The GraphQL server code is already included in the ResilientDB Docker image (<code>expolab/resdb</code>), and the <code>setup-graphql.sh</code> script automatically sets it up. The separate repository is only for reference or manual setup outside Docker.</p>
<h4><a class="anchor" id="autotoc_md1572"></a>
<b>Option A: Using Docker (Recommended)</b></h4>
<div class="fragment"><div class="line"># Start ResilientDB using Docker Compose</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d resilientdb</div>
<div class="line"> </div>
<div class="line"># Wait for ResilientDB to be healthy (60-120 seconds)</div>
<div class="line"># The setup-graphql.sh script runs automatically in the container</div>
<div class="line"># Check status</div>
<div class="line">docker-compose -f docker-compose.dev.yml ps</div>
<div class="line"> </div>
<div class="line"># Verify ResilientDB KV service is running</div>
<div class="line">curl http://localhost:18000/v1/transactions/test</div>
<div class="line"> </div>
<div class="line"># Verify GraphQL server is running (IMPORTANT - this must work!)</div>
<div class="line">curl -X POST http://localhost:5001/graphql \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;: &quot;{ __typename }&quot;}&#39;</div>
</div><!-- fragment --><p><b>Expected:</b></p><ul>
<li>KV service should return a response (may be an error, but connection works)</li>
<li>GraphQL server should return <code>{"data":{"__typename":"Query"}}</code> or similar</li>
</ul>
<p><b>If GraphQL server is not running:</b> </p><div class="fragment"><div class="line"># Check container logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs resilientdb</div>
<div class="line"> </div>
<div class="line"># The setup-graphql.sh script should run automatically</div>
<div class="line"># If it fails, you may need to set up ResilientDB manually (see Option B)</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1573"></a>
<b>Option B: Manual Setup (If Docker doesn't work)</b></h4>
<p>If Docker setup fails or you want to set up manually:</p>
<ol type="1">
<li><b>Set up ResilientDB KV Service:</b><ul>
<li>Follow ResilientDB documentation: <a href="https://github.com/apache/incubator-resilientdb">https://github.com/apache/incubator-resilientdb</a></li>
<li>Ensure KV service is running on port 18000</li>
</ul>
</li>
<li><p class="startli"><b>Set up GraphQL Server:</b></p>
<p class="startli"><b>Option B.1: Using ResilientDB Main Repository (Recommended)</b> </p><div class="fragment"><div class="line"># Clone ResilientDB main repository</div>
<div class="line">git clone https://github.com/apache/incubator-resilientdb.git</div>
<div class="line">cd incubator-resilientdb/ecosystem/graphql</div>
<div class="line"> </div>
<div class="line"># Copy setup-graphql.sh from graphq-llm repository</div>
<div class="line"># Or manually install dependencies:</div>
<div class="line">pip install flask flask-cors ariadne base58 cryptography pysha3 \</div>
<div class="line">    cryptoconditions python-rapidjson strawberry-graphql</div>
<div class="line"> </div>
<div class="line"># Fix the tx_Dict typo (if present)</div>
<div class="line">sed -i &#39;s/tx_Dict/tx_dict/g&#39; resdb_driver/transaction.py</div>
<div class="line"> </div>
<div class="line"># Start the GraphQL server</div>
<div class="line">python3 app.py</div>
<div class="line"># Server should start on port 5001</div>
</div><!-- fragment --><p class="startli"><b>Option B.2: Using Standalone GraphQL Repository (Alternative)</b> </p><div class="fragment"><div class="line"># Clone the standalone GraphQL repository</div>
<div class="line">git clone https://github.com/apache/incubator-resilientdb-graphql.git</div>
<div class="line">cd incubator-resilientdb-graphql</div>
<div class="line"> </div>
<div class="line"># Follow the repository&#39;s README for setup</div>
<div class="line"># Install dependencies as per repository instructions</div>
<div class="line"># Start the server</div>
<div class="line">python3 app.py</div>
</div><!-- fragment --><p class="startli"><b>Note:</b> The standalone repository (Option B.2) is a separate implementation. The main ResilientDB repository (Option B.1) is recommended as it matches what's in the Docker image.</p>
</li>
<li><b>Verify GraphQL Server:</b> <div class="fragment"><div class="line">curl -X POST http://localhost:5001/graphql \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;: &quot;{ __typename }&quot;}&#39;</div>
</div><!-- fragment --></li>
<li><b>Update <code>.env</code></b> to point to your ResilientDB: <div class="fragment"><div class="line">RESILIENTDB_GRAPHQL_URL=http://localhost:5001/graphql</div>
</div><!-- fragment --></li>
</ol>
<h4><a class="anchor" id="autotoc_md1574"></a>
<b>Option C: Use Existing ResilientDB</b></h4>
<p>If you already have ResilientDB with GraphQL server running:</p>
<ol type="1">
<li><b>Comment out the <code>resilientdb</code> service</b> in <code>docker-compose.dev.yml</code></li>
<li><b>Update <code>.env</code></b> to point to your existing ResilientDB: <div class="fragment"><div class="line">RESILIENTDB_GRAPHQL_URL=http://localhost:5001/graphql</div>
</div><!-- fragment --></li>
<li><b>Verify GraphQL server is accessible:</b> <div class="fragment"><div class="line">curl -X POST http://localhost:5001/graphql \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;: &quot;{ __typename }&quot;}&#39;</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h3><a class="anchor" id="autotoc_md1576"></a>
<b>Step 5: Start GraphQ-LLM Backend (HTTP API Server)</b></h3>
<p>The GraphQ-LLM backend runs as an HTTP API server that provides REST endpoints for Nexus integration. It runs separately from the MCP server.</p>
<h4><a class="anchor" id="autotoc_md1577"></a>
<b>Option A: Using Docker (Recommended)</b></h4>
<div class="fragment"><div class="line"># Start the HTTP API backend service</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d graphq-llm-backend</div>
<div class="line"> </div>
<div class="line"># Check logs (wait for &quot;Server listening&quot; message)</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs -f graphq-llm-backend</div>
<div class="line"> </div>
<div class="line"># In another terminal, verify backend is running</div>
<div class="line">curl http://localhost:3001/health</div>
</div><!-- fragment --><p><b>Expected response:</b> </p><div class="fragment"><div class="line">{&quot;status&quot;:&quot;ok&quot;,&quot;service&quot;:&quot;graphq-llm-api&quot;}</div>
</div><!-- fragment --><p><b>Note:</b></p><ul>
<li>First startup takes 30-60 seconds as it downloads the local LLM model (<code>Xenova/gpt2</code>)</li>
<li>This service runs the HTTP API on port 3001 for Nexus integration</li>
<li>The MCP server is a separate service (see Step 5.1)</li>
</ul>
<h4><a class="anchor" id="autotoc_md1578"></a>
<b>Option B: Using Local Node.js</b></h4>
<div class="fragment"><div class="line"># Set environment variables</div>
<div class="line">export LLM_PROVIDER=local</div>
<div class="line">export LLM_MODEL=Xenova/gpt2</div>
<div class="line">export EMBEDDINGS_PROVIDER=local</div>
<div class="line">export HUGGINGFACE_API_KEY=your_key_here  # Optional</div>
<div class="line"> </div>
<div class="line"># Start HTTP API server</div>
<div class="line">npm run http-api</div>
</div><!-- fragment --><p>The server will start on port 3001. Check logs for "Server listening" message.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md1580"></a>
<b>Step 5.1: Start MCP Server (Optional - for MCP Client Integration)</b></h3>
<p>The MCP (Model Context Protocol) Server provides secure two-way communication between ResilientDB and AI tools. It uses stdio transport for communication with MCP clients and runs as a <b>separate Docker service</b> from the HTTP API backend.</p>
<p><b>Important:</b> The MCP server and HTTP API backend are now separate services:</p><ul>
<li><b>HTTP API Backend</b> (Step 5): Runs on port 3001, provides REST endpoints for Nexus</li>
<li><b>MCP Server</b> (Step 5.1): Uses stdio transport, runs as a separate container for MCP client integration</li>
</ul>
<h4><a class="anchor" id="autotoc_md1581"></a>
<b>Option A: Using Docker (Recommended)</b></h4>
<div class="fragment"><div class="line"># Start the MCP server service (separate from HTTP API backend)</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d graphq-llm-mcp-server</div>
<div class="line"> </div>
<div class="line"># Check logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs -f graphq-llm-mcp-server</div>
<div class="line"> </div>
<div class="line"># Check status of all services</div>
<div class="line">docker-compose -f docker-compose.dev.yml ps</div>
</div><!-- fragment --><p><b>Expected output:</b> </p><div class="fragment"><div class="line">MCP Server started and listening on stdio</div>
<div class="line">Live Stats Service: Enabled/Disabled</div>
</div><!-- fragment --><p><b>Note:</b></p><ul>
<li>The MCP server uses stdio transport (stdin/stdout), so it doesn't expose HTTP ports</li>
<li>It's designed to be spawned as a subprocess by MCP clients</li>
<li>The container keeps stdin/stdout open for communication</li>
<li>It shares the same environment variables as the backend service</li>
<li>Both services can run simultaneously (they're independent)</li>
</ul>
<h4><a class="anchor" id="autotoc_md1582"></a>
<b>Option B: Using Local Node.js</b></h4>
<div class="fragment"><div class="line"># Set environment variables (same as backend)</div>
<div class="line">export RESILIENTDB_GRAPHQL_URL=http://localhost:5001/graphql</div>
<div class="line">export LLM_PROVIDER=deepseek</div>
<div class="line">export LLM_API_KEY=your_key_here</div>
<div class="line"> </div>
<div class="line"># Start MCP server</div>
<div class="line">npm run mcp-server</div>
</div><!-- fragment --><p><b>Note:</b> MCP servers using stdio transport are typically invoked by MCP clients as child processes. Running it standalone allows you to test it directly. In Docker, it runs as a separate container that can be started/stopped independently.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md1584"></a>
<b>Step 5.2: Start ResLens Services (Optional - for Performance Monitoring)</b></h3>
<p>ResLens provides real-time performance monitoring and profiling for ResilientDB, including CPU and memory metrics, flame graphs, and call stack analysis. Both ResLens Middleware and Frontend are now dockerized and can be started with Docker Compose.</p>
<p><b>Important:</b> ResLens repositories must be cloned separately as forks (see Quick Reference section above). The Docker Compose configuration uses absolute paths to your fork directories.</p>
<p><b>Fork URLs:</b></p><ul>
<li>Frontend: <a href="https://github.com/sophiequynn/incubator-resilientdb-ResLens.git">https://github.com/sophiequynn/incubator-resilientdb-ResLens.git</a></li>
<li>Middleware: <a href="https://github.com/sophiequynn/incubator-resilientdb-ResLens-Middleware.git">https://github.com/sophiequynn/incubator-resilientdb-ResLens-Middleware.git</a></li>
</ul>
<p><b>Fork Modifications:</b> The forks include GraphQ-LLM-specific modifications:</p><ul>
<li><b>ResLens Frontend:</b> Dockerfile (multi-stage build), updated package.json (name, dependencies), additional routes (CpuPage, MemoryPage, QueryStats), updated components</li>
<li><b>ResLens Middleware:</b> Dockerfile updates, queryStats routes and controller, improved .dockerignore</li>
</ul>
<p><b>What is ResLens?</b></p><ul>
<li><b>ResLens Middleware</b>: Node.js Express API server that aggregates performance data from ResilientDB</li>
<li><b>ResLens Frontend</b>: React/Vite web application for visualizing performance metrics</li>
<li><b>Purpose</b>: Monitor and optimize ResilientDB performance with real-time metrics</li>
</ul>
<p><b>Architecture:</b></p><ul>
<li><b>ResLens Middleware</b> (<code>ResLens-Middleware/middleware/Dockerfile</code>):<ul>
<li>Single-stage production build using Node.js 18 Alpine</li>
<li>Production dependencies only</li>
<li>Go installed for pprof tool (if needed)</li>
<li>Health check endpoint on port 3003</li>
</ul>
</li>
<li><b>ResLens Frontend</b> (<code>ResLens/Dockerfile</code>):<ul>
<li>Multi-stage build: Node.js 20 Alpine ‚Üí Build Vite app ‚Üí Nginx Alpine</li>
<li>Static files served via Nginx with SPA routing</li>
<li>Gzip compression and static asset caching enabled</li>
<li>Container port 80 mapped to host port 5173</li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md1585"></a>
<b>Option A: Using Docker (Recommended)</b></h4>
<p><b>Prerequisites:</b></p><ol type="1">
<li>Clone the ResLens forks (see Quick Reference section above): <div class="fragment"><div class="line"># Clone ResLens Frontend fork</div>
<div class="line">cd /path/to/workspace</div>
<div class="line">git clone https://github.com/sophiequynn/incubator-resilientdb-ResLens.git ResLens</div>
<div class="line"> </div>
<div class="line"># Clone ResLens Middleware fork</div>
<div class="line">git clone https://github.com/sophiequynn/incubator-resilientdb-ResLens-Middleware.git ResLens-Middleware</div>
</div><!-- fragment --></li>
<li>Update <code>docker-compose.dev.yml</code> paths if your forks are in a different location (default: <code>/Users/YOUR_USERNAME/ResLens</code> and <code>/Users/YOUR_USERNAME/ResLens-Middleware</code>).</li>
</ol>
<p><b>Note:</b> The forks include all GraphQ-LLM modifications - no additional setup needed!</p>
<div class="fragment"><div class="line"># Start ResLens Middleware (required for Frontend)</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d reslens-middleware</div>
<div class="line"> </div>
<div class="line"># Wait for middleware to be healthy (30-60 seconds)</div>
<div class="line">sleep 30</div>
<div class="line"> </div>
<div class="line"># Start ResLens Frontend (depends on Middleware)</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d reslens-frontend</div>
<div class="line"> </div>
<div class="line"># Check status of all services</div>
<div class="line">docker-compose -f docker-compose.dev.yml ps</div>
<div class="line"> </div>
<div class="line"># Check logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs -f reslens-middleware reslens-frontend</div>
</div><!-- fragment --><p><b>Expected output:</b></p><ul>
<li>ResLens Middleware: Running on port 3003</li>
<li>ResLens Frontend: Running on port 5173 (mapped from container port 80)</li>
</ul>
<p><b>Verify ResLens is running:</b> </p><div class="fragment"><div class="line"># Test Middleware health endpoint</div>
<div class="line">curl http://localhost:3003/api/v1/healthcheck</div>
<div class="line"> </div>
<div class="line"># Test Frontend (should return HTML)</div>
<div class="line">curl http://localhost:5173</div>
<div class="line"> </div>
<div class="line"># Check service status</div>
<div class="line">docker-compose -f docker-compose.dev.yml ps reslens-middleware reslens-frontend</div>
</div><!-- fragment --><p><b>Expected responses:</b></p><ul>
<li>Middleware: <code>{"status":"UP"}</code> or similar JSON response</li>
<li>Frontend: HTML page content (should start with <code>&lt;!DOCTYPE html&gt;</code>)</li>
</ul>
<p><b>Access ResLens UI:</b></p><ul>
<li>Open browser: <code><a href="http://localhost:5173">http://localhost:5173</a></code></li>
<li>You should see the ResLens dashboard for performance monitoring</li>
</ul>
<h4><a class="anchor" id="autotoc_md1586"></a>
<b>Option B: Build Images First (If Needed)</b></h4>
<p>If the images don't exist yet, build them:</p>
<div class="fragment"><div class="line"># Build ResLens Middleware image</div>
<div class="line">docker-compose -f docker-compose.dev.yml build reslens-middleware</div>
<div class="line"> </div>
<div class="line"># Build ResLens Frontend image</div>
<div class="line">docker-compose -f docker-compose.dev.yml build reslens-frontend</div>
<div class="line"> </div>
<div class="line"># Then start services (Option A above)</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d reslens-middleware reslens-frontend</div>
</div><!-- fragment --><p><b>Note:</b></p><ul>
<li>First build may take 5-10 minutes as it installs dependencies</li>
<li>ResLens Frontend depends on ResLens Middleware - start middleware first</li>
<li>ResLens Middleware depends on ResilientDB - ensure ResilientDB is running (Step 4)</li>
<li>ResLens services are optional but recommended for performance monitoring</li>
</ul>
<h4><a class="anchor" id="autotoc_md1587"></a>
<b>Configuration</b></h4>
<p>ResLens services use these default configurations in <code>docker-compose.dev.yml</code>:</p>
<ul>
<li><p class="startli"><b>ResLens Middleware:</b></p><ul>
<li>Port: <code>3003</code></li>
<li>Connects to: <code><a href="http://resilientdb:18000">http://resilientdb:18000</a></code> (ResilientDB KV service)</li>
<li>Health check: <code><a href="http://localhost:3003/api/v1/healthcheck">http://localhost:3003/api/v1/healthcheck</a></code></li>
</ul>
<p class="startli"><b>Runtime Environment Variables</b> (can be set in docker-compose):</p><ul>
<li><code>PORT</code>: Server port (default: 3003)</li>
<li><code>CPP_STATS_API_BASE_URL</code>: ResilientDB stats API (default: <code><a href="http://resilientdb:18000">http://resilientdb:18000</a></code>)</li>
<li><code>CPP_TRANSACTIONS_API_BASE_URL</code>: ResilientDB transactions API (default: <code><a href="http://resilientdb:18000">http://resilientdb:18000</a></code>)</li>
<li><code>PYROSCOPE_SERVER_URL</code>: Pyroscope server URL (optional)</li>
<li><code>PROMETHEUS_URL</code>: Prometheus server URL (optional)</li>
<li><code>NODE_EXPORTER_BASE_URL</code>: Node exporter URL (optional)</li>
<li><code>PROCESS_EXPORTER_BASE_URL</code>: Process exporter URL (optional)</li>
<li><code>EXPLORER_BASE_URL</code>: Explorer API URL (optional)</li>
</ul>
</li>
<li><p class="startli"><b>ResLens Frontend:</b></p><ul>
<li>Port: <code>5173</code> (host) ‚Üí <code>80</code> (container)</li>
<li>Connects to: <code><a href="http://reslens-middleware:3003/api/v1">http://reslens-middleware:3003/api/v1</a></code> (Middleware API)</li>
<li>Health check: <code><a href="http://localhost:5173">http://localhost:5173</a></code></li>
</ul>
<p class="startli"><b>Build-time Environment Variables</b> (set during <code>docker build</code>):</p><ul>
<li><code>VITE_MIDDLEWARE_BASE_URL</code>: URL to middleware API (default: <code><a href="http://reslens-middleware:3003/api/v1">http://reslens-middleware:3003/api/v1</a></code>)</li>
<li><code>VITE_MIDDLEWARE_SECONDARY_BASE_URL</code>: Secondary middleware URL (optional)</li>
</ul>
</li>
</ul>
<p><b>Networking:</b> Both services are on the <code>graphq-llm-network</code> Docker network, allowing them to communicate with:</p><ul>
<li>ResilientDB (via service name <code>resilientdb</code>)</li>
<li>GraphQ-LLM Backend (via service name <code>graphq-llm-backend</code>)</li>
<li>Each other (via service names <code>reslens-middleware</code> and <code>reslens-frontend</code>)</li>
</ul>
<p><b>To customize:</b> Edit <code>docker-compose.dev.yml</code> environment variables for ResLens services.</p>
<h4><a class="anchor" id="autotoc_md1588"></a>
<b>Troubleshooting ResLens</b></h4>
<p><b>Issue: ResLens Middleware not starting</b> </p><div class="fragment"><div class="line"># Check logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs reslens-middleware</div>
<div class="line"> </div>
<div class="line"># Verify ResilientDB is running</div>
<div class="line">docker-compose -f docker-compose.dev.yml ps resilientdb</div>
<div class="line"> </div>
<div class="line"># Check if port 3003 is in use</div>
<div class="line">lsof -i:3003</div>
</div><!-- fragment --><p><b>Issue: ResLens Frontend can't connect to Middleware</b> </p><div class="fragment"><div class="line"># Verify middleware is running</div>
<div class="line">curl http://localhost:3003/api/v1/healthcheck</div>
<div class="line"> </div>
<div class="line"># Check network connectivity</div>
<div class="line">docker-compose -f docker-compose.dev.yml exec reslens-frontend wget -O- http://reslens-middleware:3003/api/v1/healthcheck</div>
<div class="line"> </div>
<div class="line"># Check middleware logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs reslens-middleware</div>
</div><!-- fragment --><p><b>Issue: Port conflicts (3003 or 5173 already in use)</b> </p><div class="fragment"><div class="line"># Find process using port</div>
<div class="line">lsof -i:3003</div>
<div class="line">lsof -i:5173</div>
<div class="line"> </div>
<div class="line"># Option 1: Kill the process</div>
<div class="line">kill -9 &lt;PID&gt;</div>
<div class="line"> </div>
<div class="line"># Option 2: Change ports in docker-compose.dev.yml</div>
<div class="line"># Edit ports section:</div>
<div class="line">#   ports:</div>
<div class="line">#     - &quot;3004:3003&quot;  # Change host port</div>
<div class="line">#     - &quot;5174:80&quot;    # Change host port</div>
</div><!-- fragment --><p><b>Issue: Build failures</b> </p><div class="fragment"><div class="line"># Clear build cache and rebuild</div>
<div class="line">docker-compose -f docker-compose.dev.yml build --no-cache reslens-middleware reslens-frontend</div>
<div class="line"> </div>
<div class="line"># Check if package-lock.json exists (required for npm ci)</div>
<div class="line">ls ResLens-Middleware/middleware/package-lock.json</div>
<div class="line">ls ResLens/package-lock.json</div>
<div class="line"> </div>
<div class="line"># If missing, generate them (run from project root)</div>
<div class="line">cd ResLens-Middleware/middleware &amp;&amp; npm install &amp;&amp; cd ../..</div>
<div class="line">cd ResLens &amp;&amp; npm install &amp;&amp; cd ..</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1589"></a>
<b>Viewing Logs and Managing Services</b></h4>
<div class="fragment"><div class="line"># View logs for both services</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs -f reslens-middleware reslens-frontend</div>
<div class="line"> </div>
<div class="line"># View logs for individual services</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs -f reslens-middleware</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs -f reslens-frontend</div>
<div class="line"> </div>
<div class="line"># Stop services</div>
<div class="line">docker-compose -f docker-compose.dev.yml stop reslens-middleware reslens-frontend</div>
<div class="line"> </div>
<div class="line"># Remove services (keeps images)</div>
<div class="line">docker-compose -f docker-compose.dev.yml rm reslens-middleware reslens-frontend</div>
<div class="line"> </div>
<div class="line"># Remove services and images</div>
<div class="line">docker-compose -f docker-compose.dev.yml down reslens-middleware reslens-frontend</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1590"></a>
<b>Development vs Production</b></h4>
<p><b>Development (Local):</b></p><ul>
<li>Run services locally with <code>npm run dev</code> / <code>npm start</code> in the respective directories</li>
<li>Hot reload enabled</li>
<li>Easier debugging with direct file access</li>
</ul>
<p><b>Production (Docker):</b></p><ul>
<li>Optimized builds</li>
<li>Static file serving via Nginx for Frontend</li>
<li>Production dependencies only</li>
<li>Health checks enabled</li>
<li>Better resource management</li>
</ul>
<hr  />
<h3><a class="anchor" id="autotoc_md1592"></a>
<b>Step 6: Ingest Documentation (REQUIRED)</b></h3>
<p><b>‚ö†Ô∏è IMPORTANT:</b> Each teammate must run this on their own setup! This stores docs in your local ResilientDB.</p>
<div class="fragment"><div class="line"># If using Docker</div>
<div class="line">docker-compose -f docker-compose.dev.yml exec graphq-llm-backend npm run ingest:graphql</div>
<div class="line"> </div>
<div class="line"># If using local Node.js</div>
<div class="line">npm run ingest:graphql</div>
</div><!-- fragment --><p><b>What this does:</b></p><ul>
<li>Loads all GraphQL documentation from <code>docs/</code> directory</li>
<li>Chunks documents into smaller pieces</li>
<li>Generates embeddings (using local model or Hugging Face)</li>
<li>Stores chunks in ResilientDB</li>
</ul>
<p><b>Expected output:</b> </p><div class="fragment"><div class="line">üìö GraphQL-only Ingestion</div>
<div class="line">‚úÖ Loaded X docs from docs/graphql-official</div>
<div class="line">‚úÖ Loaded X docs from docs/graphql-spec</div>
<div class="line">‚úÖ Loaded X docs from docs/community-guides</div>
<div class="line">üöÄ Ingesting X GraphQL-specific documents...</div>
<div class="line">üìä Progress: 100/100 chunks (100%)</div>
<div class="line">‚úÖ GraphQL ingestion complete!</div>
<div class="line">Documents processed: X/X</div>
<div class="line">Chunks stored: X</div>
</div><!-- fragment --><p><b>Time:</b> 5-10 minutes (depending on system and embedding provider)</p>
<p><b>Verify:</b> Check logs for "Chunks stored: X" (should be 100+ chunks).</p>
<hr  />
<h3><a class="anchor" id="autotoc_md1594"></a>
<b>Step 7: Set Up Nexus (Separate Repository)</b></h3>
<p>Nexus is a separate Next.js application that needs to be cloned and modified. Follow these steps:</p>
<p><b>Repository:</b> <a href="https://github.com/sophiequynn/nexus.git">https://github.com/sophiequynn/nexus</a></p>
<h4><a class="anchor" id="autotoc_md1595"></a>
<b>7.1: Clone Nexus Repository</b></h4>
<div class="fragment"><div class="line"># Navigate to your workspace (outside graphq-llm)</div>
<div class="line"># You can clone it in the same parent directory as graphq-llm</div>
<div class="line">cd /path/to/workspace</div>
<div class="line"> </div>
<div class="line"># Clone Nexus repository (fork with GraphQ-LLM integration)</div>
<div class="line">git clone https://github.com/sophiequynn/nexus.git</div>
<div class="line">cd nexus</div>
</div><!-- fragment --><p><b>Repository Link:</b> <a href="https://github.com/sophiequynn/nexus.git">https://github.com/sophiequynn/nexus</a></p>
<p><b>Note:</b> This fork already includes all GraphQ-LLM integration files. No manual modifications needed!</p>
<p><b>Verify:</b> You should see a Next.js project structure with <code>package.json</code>, <code>src/</code>, <code>app/</code>, etc.</p>
<p><b>Note:</b> You do NOT need to clone the ResilientDB GraphQL repository separately. The GraphQL server is included in the ResilientDB Docker image and is set up automatically via <code>setup-graphql.sh</code> script.</p>
<h4><a class="anchor" id="autotoc_md1596"></a>
<b>7.2: Install Nexus Dependencies</b></h4>
<div class="fragment"><div class="line">npm install</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1597"></a>
<b>7.3: Set Up PostgreSQL with pgvector</b></h4>
<p><b>Using Docker (Recommended):</b></p>
<div class="fragment"><div class="line"># Start PostgreSQL with pgvector</div>
<div class="line">docker run -d \</div>
<div class="line">  --name nexus-postgres \</div>
<div class="line">  -e POSTGRES_USER=nexus \</div>
<div class="line">  -e POSTGRES_PASSWORD=nexus \</div>
<div class="line">  -e POSTGRES_DB=nexus \</div>
<div class="line">  -p 5432:5432 \</div>
<div class="line">  pgvector/pgvector:pg14</div>
<div class="line"> </div>
<div class="line"># Wait for PostgreSQL to be ready (10-20 seconds)</div>
<div class="line">sleep 15</div>
<div class="line"> </div>
<div class="line"># Verify PostgreSQL is running</div>
<div class="line">docker ps | grep nexus-postgres</div>
</div><!-- fragment --><p><b>Alternative: Using Supabase (Cloud)</b></p>
<ol type="1">
<li>Go to <a href="https://supabase.com">https://supabase.com</a></li>
<li>Create a free account</li>
<li>Create a new project</li>
<li>Get your connection string from Project Settings ‚Üí Database</li>
</ol>
<h4><a class="anchor" id="autotoc_md1598"></a>
<b>7.4: Configure Nexus Environment Variables</b></h4>
<p>Create a <code>.env</code> file in the <code>nexus</code> directory:</p>
<div class="fragment"><div class="line">cd /path/to/nexus</div>
<div class="line">touch .env</div>
</div><!-- fragment --><p>Add this configuration:</p>
<div class="fragment"><div class="line"># Nexus Environment Variables</div>
<div class="line"> </div>
<div class="line"># Database Configuration</div>
<div class="line"># For Docker PostgreSQL:</div>
<div class="line">DATABASE_URL=postgres://nexus:nexus@localhost:5432/nexus</div>
<div class="line"># For Supabase:</div>
<div class="line"># DATABASE_URL=postgres://postgres:[YOUR-PASSWORD]@[YOUR-PROJECT].supabase.co:5432/postgres</div>
<div class="line"> </div>
<div class="line"># Embedding Configuration</div>
<div class="line">EMBEDDING_DIM=384  # For sentence-transformers/all-MiniLM-L6-v2</div>
<div class="line"> </div>
<div class="line"># API Keys (Optional but recommended for Nexus features)</div>
<div class="line"># Get Gemini API key: https://makersuite.google.com/app/apikey</div>
<div class="line">GEMINI_API_KEY=your_gemini_key_here</div>
<div class="line"># Get DeepSeek API key: https://www.deepseek.com/</div>
<div class="line">DEEPSEEK_API_KEY=your_deepseek_key_here</div>
<div class="line"># Get LlamaCloud API key: https://cloud.llamaindex.ai/</div>
<div class="line">LLAMA_CLOUD_API_KEY=your_llamacloud_key_here</div>
<div class="line"> </div>
<div class="line"># Supabase Configuration (if using Supabase for vector store)</div>
<div class="line">SUPABASE_URL=https://your-project.supabase.co</div>
<div class="line">SUPABASE_ANON_KEY=your_supabase_anon_key</div>
<div class="line"> </div>
<div class="line"># GraphQ-LLM Backend URL (REQUIRED for GraphQL Tutor)</div>
<div class="line">GRAPHQ_LLM_API_URL=http://localhost:3001</div>
<div class="line"># Or use NEXT_PUBLIC_ prefix for client-side access:</div>
<div class="line">NEXT_PUBLIC_GRAPHQ_LLM_API_URL=http://localhost:3001</div>
</div><!-- fragment --><p><b>How to get API keys:</b></p><ul>
<li><b>Gemini (Recommended):</b> <a href="https://makersuite.google.com/app/apikey">https://makersuite.google.com/app/apikey</a> ‚Üí Create API key ‚Üí Copy and paste</li>
<li><b>DeepSeek:</b> <a href="https://www.deepseek.com/">https://www.deepseek.com/</a> ‚Üí Sign up ‚Üí Get API key</li>
<li><b>LlamaCloud:</b> <a href="https://cloud.llamaindex.ai/">https://cloud.llamaindex.ai/</a> ‚Üí Sign up ‚Üí Get API key</li>
<li><b>Supabase:</b> From your Supabase project dashboard (if using cloud PostgreSQL)</li>
</ul>
<p><b>Note:</b></p><ul>
<li>Gemini API key is recommended for best LLM performance</li>
<li>Other API keys are optional - Nexus will work without them, but some features may be limited</li>
</ul>
<h4><a class="anchor" id="autotoc_md1599"></a>
<b>7.5: Set Up Nexus Database Schema</b></h4>
<div class="fragment"><div class="line"># If using Docker PostgreSQL, run migrations</div>
<div class="line"># (Check Nexus repository for migration commands)</div>
<div class="line"># Usually something like:</div>
<div class="line">npm run db:migrate</div>
<div class="line"># or</div>
<div class="line">npx prisma migrate dev</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1600"></a>
<b>7.6: Add GraphQ-LLM Integration to Nexus (REQUIRED)</b></h4>
<p><b>‚ö†Ô∏è IMPORTANT:</b> This step adds the GraphQL Tutor UI and API routes to Nexus. This is a critical integration step.</p>
<p><b>üìã Reference Guide:</b></p><ul>
<li><b>Location:</b> <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> in the GraphQ-LLM repository</li>
<li><b>Path:</b> <code>/path/to/graphq-llm/NEXUS_UI_EXTENSION_GUIDE.md</code></li>
<li><b>Link:</b> See the file in your cloned GraphQ-LLM repository</li>
</ul>
<p><b>What you need to do:</b></p>
<ol type="1">
<li><b>Open the guide:</b> <div class="fragment"><div class="line"># From your workspace, open the guide</div>
<div class="line">cat /path/to/graphq-llm/NEXUS_UI_EXTENSION_GUIDE.md</div>
<div class="line"># Or open it in your editor</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Create the following files in Nexus:</b></p>
<p class="startli"><b>a. API Route</b> (create directory first): </p><div class="fragment"><div class="line">mkdir -p src/app/api/graphql-tutor/analyze</div>
</div><!-- fragment --><ul>
<li><b>File:</b> <code>src/app/api/graphql-tutor/analyze/route.ts</code></li>
<li><b>Code:</b> Copy from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 1</li>
</ul>
<p class="startli"><b>b. Main Page</b> (create directory first): </p><div class="fragment"><div class="line">mkdir -p src/app/graphql-tutor/components</div>
</div><!-- fragment --><ul>
<li><b>File:</b> <code>src/app/graphql-tutor/page.tsx</code></li>
<li><b>Code:</b> Copy from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 2</li>
</ul>
<p class="startli"><b>c. Components</b> (create in the components directory):</p><ul>
<li><b>File:</b> <code>src/app/graphql-tutor/components/tutor-panel.tsx</code><ul>
<li><b>Code:</b> Copy from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 3</li>
</ul>
</li>
<li><b>File:</b> <code>src/app/graphql-tutor/components/explanation-panel.tsx</code><ul>
<li><b>Code:</b> Copy from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 4</li>
</ul>
</li>
<li><b>File:</b> <code>src/app/graphql-tutor/components/optimization-panel.tsx</code><ul>
<li><b>Code:</b> Copy from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 5</li>
</ul>
</li>
<li><b>File:</b> <code>src/app/graphql-tutor/components/efficiency-display.tsx</code><ul>
<li><b>Code:</b> Copy from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 6</li>
</ul>
</li>
</ul>
<p class="startli"><b>d. Update Home Page:</b></p><ul>
<li><b>File:</b> <code>src/app/page.tsx</code> (modify existing file)</li>
<li><b>Code:</b> Add navigation link from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> Section 7</li>
</ul>
</li>
<li><b>Install Required Dependencies:</b> <div class="fragment"><div class="line">cd /path/to/nexus</div>
<div class="line">npm install lucide-react</div>
</div><!-- fragment --></li>
</ol>
<p><b>Step-by-Step Copy-Paste Method:</b></p>
<ol type="1">
<li>Navigate to your GraphQ-LLM repository: <div class="fragment"><div class="line">cd /path/to/graphq-llm</div>
</div><!-- fragment --></li>
<li>Open <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> in your editor or view it: <div class="fragment"><div class="line">cat NEXUS_UI_EXTENSION_GUIDE.md</div>
<div class="line"># Or use: code NEXUS_UI_EXTENSION_GUIDE.md</div>
</div><!-- fragment --></li>
<li>For each section in the guide:<ul>
<li>Copy the code block</li>
<li>Navigate to Nexus directory: <code>cd /path/to/nexus</code></li>
<li>Create the file in the specified location</li>
<li>Paste the code</li>
<li>Save the file</li>
</ul>
</li>
<li>Verify all files are created: <div class="fragment"><div class="line">cd /path/to/nexus</div>
<div class="line">ls -la src/app/api/graphql-tutor/analyze/route.ts</div>
<div class="line">ls -la src/app/graphql-tutor/page.tsx</div>
<div class="line">ls -la src/app/graphql-tutor/components/tutor-panel.tsx</div>
<div class="line">ls -la src/app/graphql-tutor/components/explanation-panel.tsx</div>
<div class="line">ls -la src/app/graphql-tutor/components/optimization-panel.tsx</div>
<div class="line">ls -la src/app/graphql-tutor/components/efficiency-display.tsx</div>
</div><!-- fragment --></li>
</ol>
<p><b>All files should exist after this step!</b></p>
<h4><a class="anchor" id="autotoc_md1601"></a>
<b>7.7: Start Nexus</b></h4>
<div class="fragment"><div class="line"># Start Nexus development server</div>
<div class="line">npm run dev</div>
</div><!-- fragment --><p>Nexus will start on <code><a href="http://localhost:3000">http://localhost:3000</a></code>.</p>
<p><b>Verify Nexus is running:</b> </p><div class="fragment"><div class="line">curl http://localhost:3000/api/research/documents</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md1603"></a>
<b>Step 8: Verify Everything Works</b></h3>
<h4><a class="anchor" id="autotoc_md1604"></a>
<b>8.1: Test GraphQ-LLM Backend</b></h4>
<div class="fragment"><div class="line"># Test health endpoint</div>
<div class="line">curl http://localhost:3001/health</div>
<div class="line"> </div>
<div class="line"># Test explanation endpoint</div>
<div class="line">curl -X POST http://localhost:3001/api/explanations/explain \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;:&quot;{ getTransaction(id: \&quot;123\&quot;) { asset } }&quot;}&#39;</div>
</div><!-- fragment --><p><b>Expected:</b> Should return JSON with explanation including documentation context.</p>
<h4><a class="anchor" id="autotoc_md1605"></a>
<b>8.2: Test Nexus Integration</b></h4>
<div class="fragment"><div class="line"># Test Nexus API route that proxies to GraphQ-LLM</div>
<div class="line">curl -X POST http://localhost:3000/api/graphql-tutor/analyze \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;:&quot;{ getTransaction(id: \&quot;123\&quot;) { asset } }&quot;}&#39;</div>
</div><!-- fragment --><p><b>Expected:</b> Should return JSON with explanation, optimizations, and efficiency data.</p>
<h4><a class="anchor" id="autotoc_md1606"></a>
<b>8.3: Test Nexus UI</b></h4>
<ol type="1">
<li>Open browser: <code><a href="http://localhost:3000/graphql-tutor">http://localhost:3000/graphql-tutor</a></code></li>
<li>Enter a GraphQL query: <code>{ getTransaction(id: "123") { asset } }</code></li>
<li>Click "Analyze Query"</li>
<li>You should see:<ul>
<li><b>Explanation tab:</b> Explanation with documentation context</li>
<li><b>Optimization tab:</b> Optimization suggestions</li>
<li><b>Efficiency tab:</b> Efficiency score and metrics</li>
</ul>
</li>
</ol>
<p><b>Test with these queries:</b> See <code><a class="el" href="../../db/d40/TEST__QUERIES_8md.html">TEST_QUERIES.md</a></code> for 10 example queries.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md1608"></a>
‚úÖ Verification Checklist</h2>
<p>After completing all steps, verify:</p>
<ul class="check">
<li class="unchecked">GraphQ-LLM HTTP API responds: <code>curl <a href="http://localhost:3001/health">http://localhost:3001/health</a></code></li>
</ul>
<ul class="check">
<li class="unchecked">(Optional) GraphQ-LLM MCP Server is running: <code>docker-compose -f docker-compose.dev.yml ps graphq-llm-mcp-server</code></li>
</ul>
<ul class="check">
<li class="unchecked">ResilientDB KV service is running: <code>curl <a href="http://localhost:18000/v1/transactions/test">http://localhost:18000/v1/transactions/test</a></code></li>
</ul>
<ul class="check">
<li class="unchecked"><b>ResilientDB GraphQL server is running</b> (REQUIRED): &lsquo;curl -X POST <a href="http://localhost:5001/graphql">http://localhost:5001/graphql</a> -H "Content-Type: application/json" -d &rsquo;{"query":"{ __typename }"}'<code><ul>
<li>Should return:</li>
</ul>
</code>{"data":{"__typename":"Query"}}<code>or similar<ul>
<li>If this fails, document ingestion and RAG will not work!</li>
</ul>
</code></li>
</ul>
<ul class="check">
<li class="unchecked"><code> (Optional) ResLens Middleware is running:</code>curl <a href="http://localhost:3003/api/v1/healthcheck">http://localhost:3003/api/v1/healthcheck</a><code><ul>
<li>Should return:</li>
</ul>
</code>{"status":"UP"}<code>or similar JSON response</code></li>
</ul>
<ul class="check">
<li class="unchecked"><code> (Optional) ResLens Frontend is accessible:</code>curl <a href="http://localhost:5173">http://localhost:5173</a><code>or open</code><a href="http://localhost:5173">http://localhost:5173</a><code>in browser</code></li>
</ul>
<ul class="check">
<li class="unchecked"><code> Documents ingested: Check logs for "Chunks stored: X" (should be 100+)</code></li>
</ul>
<ul class="check">
<li class="unchecked"><code> Nexus is running:</code>curl <a href="http://localhost:3000/api/research/documents">http://localhost:3000/api/research/documents</a><code></code></li>
</ul>
<ul class="check">
<li class="unchecked"><code> Nexus UI accessible: Open</code><a href="http://localhost:3000/graphql-tutor">http://localhost:3000/graphql-tutor</a>`</li>
</ul>
<ul class="check">
<li class="unchecked">Explanation endpoint works: Test via Nexus UI or direct API call</li>
</ul>
<ul class="check">
<li class="unchecked">RAG retrieval works: Explanations include documentation context from ResilientDB</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1610"></a>
üîß Current Configuration Summary</h2>
<h3><a class="anchor" id="autotoc_md1611"></a>
<b>GraphQ-LLM Configuration:</b></h3>
<ul>
<li><b>LLM Provider:</b> <code>gemini</code> (using <code>gemini-2.5-flash-lite</code>)</li>
<li><b>LLM API Key:</b> Required (get from <a href="https://makersuite.google.com/app/apikey">https://makersuite.google.com/app/apikey</a>)</li>
<li><b>Embeddings Provider:</b> <code>local</code> (using <code>Xenova/all-MiniLM-L6-v2</code>)</li>
<li><b>HTTP API Backend Port:</b> <code>3001</code> (for Nexus integration)</li>
<li><b>MCP Server:</b> Separate service using stdio transport (no HTTP port)</li>
<li><b>ResilientDB GraphQL URL:</b> <code><a href="http://localhost:5001/graphql">http://localhost:5001/graphql</a></code> (or <code><a href="http://resilientdb:5001/graphql">http://resilientdb:5001/graphql</a></code> in Docker)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1612"></a>
<b>Docker Services:</b></h3>
<ul>
<li><b>ResilientDB:</b> Ports 18000 (KV service) and 5001 (GraphQL server)</li>
<li><b>GraphQ-LLM Backend:</b> Port 3001 (HTTP API for Nexus)</li>
<li><b>GraphQ-LLM MCP Server:</b> Separate service (stdio transport, no HTTP port)</li>
<li><b>ResLens Middleware:</b> Port 3003 (performance monitoring API) - Optional</li>
<li><b>ResLens Frontend:</b> Port 5173 (performance monitoring UI) - Optional</li>
</ul>
<h3><a class="anchor" id="autotoc_md1613"></a>
<b>Nexus Configuration:</b></h3>
<ul>
<li><b>Port:</b> <code>3000</code></li>
<li><b>Database:</b> PostgreSQL with pgvector (Docker or Supabase)</li>
<li><b>GraphQ-LLM Backend:</b> <code><a href="http://localhost:3001">http://localhost:3001</a></code></li>
</ul>
<h3><a class="anchor" id="autotoc_md1614"></a>
<b>Integration:</b></h3>
<ul>
<li>GraphQ-LLM HTTP API: <code><a href="http://localhost:3001">http://localhost:3001</a></code> (for Nexus)</li>
<li>GraphQ-LLM MCP Server: Separate service (for MCP client integration)</li>
<li>Nexus API Route: <code><a href="http://localhost:3000/api/graphql-tutor/analyze">http://localhost:3000/api/graphql-tutor/analyze</a></code></li>
<li>Nexus proxies requests to GraphQ-LLM HTTP API backend</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1616"></a>
üêõ Troubleshooting</h2>
<h3><a class="anchor" id="autotoc_md1617"></a>
<b>Issue: GraphQ-LLM HTTP API not starting</b></h3>
<p><b>Check:</b> </p><div class="fragment"><div class="line"># Check if port 3001 is in use</div>
<div class="line">lsof -i :3001</div>
<div class="line"> </div>
<div class="line"># Check logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs graphq-llm-backend</div>
<div class="line"># or if running locally</div>
<div class="line">tail -f /tmp/graphq-llm-http.log</div>
</div><!-- fragment --><p><b>Solution:</b></p><ul>
<li>Kill process on port 3001: <code>pkill -f "npm run http-api"</code></li>
<li>Restart the service</li>
</ul>
<h3><a class="anchor" id="autotoc_md1618"></a>
<b>Issue: Local LLM model not downloading</b></h3>
<p><b>Check:</b> </p><div class="fragment"><div class="line"># Check Hugging Face cache</div>
<div class="line">ls -la ~/.cache/huggingface/</div>
<div class="line"> </div>
<div class="line"># Clear cache and retry</div>
<div class="line">rm -rf ~/.cache/huggingface/</div>
</div><!-- fragment --><p><b>Solution:</b></p><ul>
<li>Ensure <code>HUGGINGFACE_API_KEY</code> is set in <code>.env</code> (optional but helps with downloads)</li>
<li>Wait for model download (first time takes 5-10 minutes)</li>
<li>Check internet connection</li>
</ul>
<h3><a class="anchor" id="autotoc_md1619"></a>
<b>Issue: Nexus not connecting to GraphQ-LLM</b></h3>
<p><b>Check:</b> </p><div class="fragment"><div class="line"># Verify GraphQ-LLM is running</div>
<div class="line">curl http://localhost:3001/health</div>
<div class="line"> </div>
<div class="line"># Check Nexus environment variables</div>
<div class="line">cat /path/to/nexus/.env | grep GRAPHQ_LLM</div>
</div><!-- fragment --><p><b>Solution:</b></p><ul>
<li>Ensure <code>GRAPHQ_LLM_API_URL=<a href="http://localhost:3001">http://localhost:3001</a></code> is set in Nexus <code>.env</code></li>
<li>Or set <code>NEXT_PUBLIC_GRAPHQ_LLM_API_URL=<a href="http://localhost:3001">http://localhost:3001</a></code></li>
<li>Restart Nexus after changing <code>.env</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md1620"></a>
<b>Issue: GraphQL Server not running</b></h3>
<p><b>Check:</b> </p><div class="fragment"><div class="line"># Verify GraphQL server is running</div>
<div class="line">curl -X POST http://localhost:5001/graphql \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;: &quot;{ __typename }&quot;}&#39;</div>
</div><!-- fragment --><p><b>Solution:</b></p><ul>
<li>If using Docker: Check container logs: <code>docker-compose -f docker-compose.dev.yml logs resilientdb</code></li>
<li>The <code>setup-graphql.sh</code> script should run automatically in Docker</li>
<li>If it fails, check that Python dependencies are installed</li>
<li>GraphQL server must be running on port 5001 for document ingestion to work</li>
</ul>
<h3><a class="anchor" id="autotoc_md1621"></a>
<b>Issue: No documents retrieved in explanations</b></h3>
<p><b>Check:</b> </p><div class="fragment"><div class="line"># Verify GraphQL server is running first</div>
<div class="line">curl -X POST http://localhost:5001/graphql \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;: &quot;{ __typename }&quot;}&#39;</div>
<div class="line"> </div>
<div class="line"># Verify documents were ingested via GraphQL</div>
<div class="line">curl -X POST http://localhost:5001/graphql \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;: &quot;{ transactions(limit: 5) { id } }&quot;}&#39;</div>
</div><!-- fragment --><p><b>Solution:</b></p><ul>
<li><b>First:</b> Ensure GraphQL server is running (see issue above)</li>
<li>Re-run document ingestion: <code>npm run ingest:graphql</code></li>
<li>Check that <code>docs/</code> directory has GraphQL documentation files</li>
<li>Verify ingestion completed successfully (check logs)</li>
<li>If GraphQL server is not running, ingestion will fail</li>
</ul>
<h3><a class="anchor" id="autotoc_md1622"></a>
<b>Issue: PostgreSQL connection failed (Nexus)</b></h3>
<p><b>Check:</b> </p><div class="fragment"><div class="line"># Verify PostgreSQL is running</div>
<div class="line">docker ps | grep nexus-postgres</div>
<div class="line"> </div>
<div class="line"># Test connection</div>
<div class="line">psql postgres://nexus:nexus@localhost:5432/nexus -c &quot;SELECT 1&quot;</div>
</div><!-- fragment --><p><b>Solution:</b></p><ul>
<li>Start PostgreSQL: <code>docker start nexus-postgres</code></li>
<li>Check <code>DATABASE_URL</code> in Nexus <code>.env</code> file</li>
<li>Wait 15-20 seconds after starting PostgreSQL before starting Nexus</li>
</ul>
<h3><a class="anchor" id="autotoc_md1623"></a>
<b>Issue: Nexus UI components not rendering</b></h3>
<p><b>Check:</b></p><ul>
<li>Verify all component files are created in correct locations</li>
<li>Check browser console for errors</li>
<li>Verify shadcn/ui components are installed</li>
</ul>
<p><b>Solution:</b></p><ul>
<li>Ensure all files from <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> are created</li>
<li>Install missing dependencies: <code>npm install lucide-react</code></li>
<li>Restart Nexus: <code>npm run dev</code></li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1625"></a>
üéØ Quick Start Commands (Copy-Paste)</h2>
<p>For team members who want to get started quickly:</p>
<div class="fragment"><div class="line"># 1. Clone and install GraphQ-LLM</div>
<div class="line"># Replace &lt;repo-url&gt; with your actual GraphQ-LLM repository URL</div>
<div class="line">git clone &lt;repo-url&gt; &amp;&amp; cd graphq-llm &amp;&amp; npm install</div>
<div class="line"> </div>
<div class="line"># 2. Create .env file (copy configuration from Step 3 above)</div>
<div class="line">touch .env</div>
<div class="line"># Edit .env with your configuration</div>
<div class="line"> </div>
<div class="line"># 3. Start ResilientDB</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d resilientdb</div>
<div class="line"> </div>
<div class="line"># 4. Wait for ResilientDB (60-120 seconds)</div>
<div class="line">sleep 60</div>
<div class="line"> </div>
<div class="line"># 5. Start GraphQ-LLM HTTP API backend</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d graphq-llm-backend</div>
<div class="line"> </div>
<div class="line"># 5.1. (Optional) Start MCP Server for MCP client integration</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d graphq-llm-mcp-server</div>
<div class="line"> </div>
<div class="line"># 5.2. (Optional) Clone ResLens forks and start services</div>
<div class="line">cd /path/to/workspace</div>
<div class="line">git clone https://github.com/sophiequynn/incubator-resilientdb-ResLens.git ResLens</div>
<div class="line">git clone https://github.com/sophiequynn/incubator-resilientdb-ResLens-Middleware.git ResLens-Middleware</div>
<div class="line"> </div>
<div class="line"># Start ResLens services (Docker Compose will use absolute paths from docker-compose.dev.yml)</div>
<div class="line">cd /path/to/graphq-llm</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d reslens-middleware</div>
<div class="line">sleep 30  # Wait for middleware to be healthy</div>
<div class="line">docker-compose -f docker-compose.dev.yml up -d reslens-frontend</div>
<div class="line"> </div>
<div class="line"># 6. Wait for backend (30-60 seconds)</div>
<div class="line">sleep 30</div>
<div class="line"> </div>
<div class="line"># 7. Ingest documents (REQUIRED - each teammate must do this)</div>
<div class="line">docker-compose -f docker-compose.dev.yml exec graphq-llm-backend npm run ingest:graphql</div>
<div class="line"> </div>
<div class="line"># 8. Set up Nexus (separate repository)</div>
<div class="line">cd /path/to/workspace</div>
<div class="line">git clone https://github.com/sophiequynn/nexus.git &amp;&amp; cd nexus &amp;&amp; npm install</div>
<div class="line"> </div>
<div class="line"># 9. Set up PostgreSQL for Nexus</div>
<div class="line">docker run -d --name nexus-postgres \</div>
<div class="line">  -e POSTGRES_USER=nexus -e POSTGRES_PASSWORD=nexus \</div>
<div class="line">  -e POSTGRES_DB=nexus -p 5432:5432 pgvector/pgvector:pg14</div>
<div class="line"> </div>
<div class="line"># 10. Create Nexus .env file (copy configuration from Step 7.4 above)</div>
<div class="line">touch .env</div>
<div class="line"># Edit .env with your configuration</div>
<div class="line"> </div>
<div class="line"># 11. Add GraphQ-LLM integration to Nexus</div>
<div class="line"># Follow Step 7.6 above - copy files from NEXUS_UI_EXTENSION_GUIDE.md</div>
<div class="line"># Location: /path/to/graphq-llm/NEXUS_UI_EXTENSION_GUIDE.md</div>
<div class="line"> </div>
<div class="line"># 12. Start Nexus</div>
<div class="line">npm run dev</div>
<div class="line"> </div>
<div class="line"># 13. Test integration</div>
<div class="line">curl -X POST http://localhost:3000/api/graphql-tutor/analyze \</div>
<div class="line">  -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">  -d &#39;{&quot;query&quot;:&quot;{ getTransaction(id: \&quot;123\&quot;) { asset } }&quot;}&#39;</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md1627"></a>
üìö Additional Resources</h2>
<h3><a class="anchor" id="autotoc_md1628"></a>
<b>Repositories:</b></h3>
<ul>
<li><b>GraphQ-LLM Repository:</b> Replace <code>&lt;repository-url&gt;</code> with your actual repository URL</li>
<li><b>Nexus Repository:</b> <a href="https://github.com/sophiequynn/nexus.git">https://github.com/sophiequynn/nexus</a></li>
<li><b>ResilientDB Main Repository:</b> <a href="https://github.com/apache/incubator-resilientdb">https://github.com/apache/incubator-resilientdb</a> (for reference - contains GraphQL server in <code>ecosystem/graphql/</code>)</li>
<li><b>ResilientDB GraphQL Repository (Standalone):</b> <a href="https://github.com/apache/incubator-resilientdb-graphql">https://github.com/apache/incubator-resilientdb-graphql</a> (for reference only - not needed if using Docker)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1629"></a>
<b>Documentation Files (in GraphQ-LLM repository):</b></h3>
<ul>
<li><b>Nexus UI Extension Guide:</b> <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code> (complete code for all Nexus integration files)</li>
<li><b>Test Queries:</b> <code><a class="el" href="../../db/d40/TEST__QUERIES_8md.html">TEST_QUERIES.md</a></code> (10 example queries to test the tutor)</li>
<li><b>Docker Services Testing:</b> <code><a class="el" href="../../d8/d4e/TEST__DOCKER__SERVICES_8md.html">TEST_DOCKER_SERVICES.md</a></code> (comprehensive testing guide for all Docker services including ResLens)</li>
<li><b>Project Status:</b> <code>FINAL_PHASES_AND_STEPS.md</code> (overall project progress)</li>
<li><b>Integration Details:</b> <code>WHY_INTEGRATE_RESLENS_NEXUS.md</code> (why these integrations are needed)</li>
<li><b>ResilientDB Docs:</b> <code>docs/</code> directory (documentation ingested for RAG)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1630"></a>
<b>API Key Resources:</b></h3>
<ul>
<li><b>Gemini API Key:</b> <a href="https://makersuite.google.com/app/apikey">https://makersuite.google.com/app/apikey</a></li>
<li><b>Hugging Face Token:</b> <a href="https://huggingface.co/settings/tokens">https://huggingface.co/settings/tokens</a></li>
<li><b>DeepSeek API Key:</b> <a href="https://www.deepseek.com/">https://www.deepseek.com/</a></li>
<li><b>LlamaCloud API Key:</b> <a href="https://cloud.llamaindex.ai/">https://cloud.llamaindex.ai/</a></li>
<li><b>Supabase:</b> <a href="https://supabase.com">https://supabase.com</a></li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1632"></a>
üÜò Need Help?</h2>
<p>If you encounter issues:</p>
<ol type="1">
<li><b>Check logs:</b> <div class="fragment"><div class="line"># GraphQ-LLM logs</div>
<div class="line">docker-compose -f docker-compose.dev.yml logs graphq-llm-backend</div>
<div class="line"> </div>
<div class="line"># Nexus logs (in Nexus directory)</div>
<div class="line">npm run dev  # Check terminal output</div>
</div><!-- fragment --></li>
<li><b>Verify environment variables:</b><ul>
<li>GraphQ-LLM <code>.env</code> file</li>
<li>Nexus <code>.env</code> file</li>
</ul>
</li>
<li><b>Check service health:</b> <div class="fragment"><div class="line"># GraphQ-LLM HTTP API Backend</div>
<div class="line">curl http://localhost:3001/health</div>
<div class="line"> </div>
<div class="line"># GraphQ-LLM MCP Server (check container status)</div>
<div class="line">docker-compose -f docker-compose.dev.yml ps graphq-llm-mcp-server</div>
<div class="line"> </div>
<div class="line"># Nexus</div>
<div class="line">curl http://localhost:3000/api/research/documents</div>
<div class="line"> </div>
<div class="line"># ResilientDB KV Service</div>
<div class="line">curl http://localhost:18000/v1/transactions/test</div>
<div class="line"> </div>
<div class="line"># ResilientDB GraphQL Server</div>
<div class="line">curl -X POST http://localhost:5001/graphql -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;query&quot;:&quot;{ __typename }&quot;}&#39;</div>
<div class="line"> </div>
<div class="line"># ResLens Middleware (Optional)</div>
<div class="line">curl http://localhost:3003/api/v1/healthcheck</div>
<div class="line"> </div>
<div class="line"># ResLens Frontend (Optional)</div>
<div class="line">curl http://localhost:5173</div>
</div><!-- fragment --></li>
<li><b>Review troubleshooting section above</b></li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md1634"></a>
‚úÖ Success Criteria</h2>
<p>You've successfully set up the project when:</p>
<ol type="1">
<li>‚úÖ GraphQ-LLM HTTP API is running on port 3001</li>
<li>‚úÖ (Optional) GraphQ-LLM MCP Server is running (for MCP client integration)</li>
<li>‚úÖ ResilientDB is running and accessible (KV service on 18000, GraphQL on 5001)</li>
<li>‚úÖ (Optional) ResLens services are running (Middleware on 3003, Frontend on 5173)</li>
<li>‚úÖ Documents are ingested (check logs for chunk count - should be 100+)</li>
<li>‚úÖ Nexus is running on port 3000</li>
<li>‚úÖ Nexus UI shows GraphQL Tutor page at <code><a href="http://localhost:3000/graphql-tutor">http://localhost:3000/graphql-tutor</a></code></li>
<li>‚úÖ Query analysis works in Nexus UI</li>
<li>‚úÖ Explanations include documentation context from ResilientDB</li>
</ol>
<p><b>Congratulations! You're now at the same stage as the current setup! üéâ</b></p>
<hr  />
<h2><a class="anchor" id="autotoc_md1636"></a>
üìù Notes for Team Members</h2>
<h3><a class="anchor" id="autotoc_md1637"></a>
<b>Critical Steps:</b></h3>
<ul>
<li><b>Each teammate must run document ingestion separately</b> - docs are stored in your local ResilientDB</li>
<li><b>Nexus UI extensions must be added manually</b> - follow Step 7.6 and use <code><a class="el" href="../../d7/d16/NEXUS__UI__EXTENSION__GUIDE_8md.html">NEXUS_UI_EXTENSION_GUIDE.md</a></code></li>
<li><b>Gemini API key is required</b> - get it from <a href="https://makersuite.google.com/app/apikey">https://makersuite.google.com/app/apikey</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md1638"></a>
<b>Important Reminders:</b></h3>
<ul>
<li><b>First startup takes longer</b> - models need to be downloaded (5-10 minutes)</li>
<li><b>Environment variables are critical</b> - double-check <code>.env</code> files in both GraphQ-LLM and Nexus</li>
<li><b>Test with provided queries</b> - see <code><a class="el" href="../../db/d40/TEST__QUERIES_8md.html">TEST_QUERIES.md</a></code> for 10 example queries</li>
<li><b>Nexus must be cloned separately</b> - it's a different repository from GraphQ-LLM</li>
<li><b>All Nexus integration files must be created</b> - see Step 7.6 for complete list</li>
</ul>
<h3><a class="anchor" id="autotoc_md1639"></a>
<b>What Gets Modified:</b></h3>
<ul>
<li><b>GraphQ-LLM:</b> No modifications needed (just clone and configure)</li>
<li><b>Nexus:</b> Requires adding 6 new files (see Step 7.6):<ol type="1">
<li><code>src/app/api/graphql-tutor/analyze/route.ts</code></li>
<li><code>src/app/graphql-tutor/page.tsx</code></li>
<li><code>src/app/graphql-tutor/components/tutor-panel.tsx</code></li>
<li><code>src/app/graphql-tutor/components/explanation-panel.tsx</code></li>
<li><code>src/app/graphql-tutor/components/optimization-panel.tsx</code></li>
<li><code>src/app/graphql-tutor/components/efficiency-display.tsx</code></li>
<li>Modify <code>src/app/page.tsx</code> (add navigation link)</li>
</ol>
</li>
</ul>
<hr  />
<p><b>Ready to start? Begin with Step 1! üöÄ</b>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
