#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: introspection</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dd/de3/md__2github_2workspace_2ecosystem_2ai-tools_2mcp_2graphq-llm_2docs_2graphql-official_2learn_2introspection.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">introspection</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md939"></a>
Introspection</h1>
<p>Learn how to query information about a GraphQL schema</p>
<p>It's often useful to ask a GraphQL schema for information about what features it supports. GraphQL allows us to do so using the <a href="https://spec.graphql.org/draft/#sec-Introspection">introspection system</a>.</p>
<p>Introspection queries are special kinds of queries that allow you to learn about a GraphQL API's schema, and they also help power GraphQL development tools. On this page, we'll learn how to run different queries to learn more about an underlying schema's types, fields, and descriptions.</p>
<h2><a class="anchor" id="autotoc_md940"></a>
Type name introspection</h2>
<p>We have already seen an example of introspection on the <a href="../..//learn/schema/">Schemas and Types page</a>. When querying a field that returned Union type, we included the <code>__typename</code> meta-field directly in a selection set to get the string value of the names of the different types returned by a search query. Let's look at this example again:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  search(text: &quot;an&quot;) {</div>
<div class="line">    __typename</div>
<div class="line">    ... on Character {</div>
<div class="line">      name</div>
<div class="line">    }</div>
<div class="line">    ... on Starship {</div>
<div class="line">      name</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>We didn't add the <code>__typename</code> field to our GraphQL API explicitly—the GraphQL specification says that it must be provided to clients by a GraphQL implementation. This field can be queried for any field with an Object, Interface, or Union type as the underlying output type.</p>
<h2><a class="anchor" id="autotoc_md941"></a>
Schema introspection</h2>
<p>Introspection can do more than provide type names in a query. If you designed the type system for a GraphQL API, then you'll likely already know what types are available. But if you didn't design it, you can ask GraphQL by querying the <code>__schema</code> field, which is always available on the <code>query</code> root operation type.</p>
<p>Let's do so now and ask what types are available in the Star Wars schema:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __schema {</div>
<div class="line">    types {</div>
<div class="line">      name</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Wow, that's a lot of types! What are they? Let's group them:</p>
<ul>
<li>Types that we defined in our type system: <code>Query</code>, <code>Mutation</code>, <code>Character</code>, <code>Human</code>, <code>Episode</code>, <code>Droid</code>, <code>LengthUnit</code>, <code>FriendsConnection</code>, <code>FriendsEdge</code>, <code>PageInfo</code>, <code>Review</code>, <code>ReviewInput</code>, <code>Starship</code>, and <code>SearchResult</code></li>
<li>Built-in scalars that the type system provided: <code>Boolean</code>, <code>Float</code>, <code>ID</code>, <code>Int</code>, and <code>String</code></li>
<li>Types preceded with a double underscore that are part of the introspection system: <code>__Schema</code>, <code>__Type</code>, <code>__TypeKind</code>, <code>__Field</code>, <code>__InputValue</code>, <code>__EnumValue</code>, <code>__Directive</code>, and <code>__DirectiveLocation</code></li>
</ul>
<p>Now, let's try to figure out a good place to start exploring what queries are available. When we designed our type system, we specified what type all queries would start at; let's ask the introspection system about that:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __schema {</div>
<div class="line">    queryType {</div>
<div class="line">      name</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The result matches what we said in the <a href="../..//learn/schema/#type-system">type system section</a>—that the <code>Query</code> type is where we will start. Note that the naming here was just by convention; we could have named our <code>Query</code> type anything else, and it still would have been returned here had we specified it was the starting type for queries. Naming it <code>Query</code>, though, is a useful convention.</p>
<p>It is often useful to examine one specific type. Let's take a look at the <code>Droid</code> type:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __type(name: &quot;Droid&quot;) {</div>
<div class="line">    name</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>But what if we want to know more about Droid? For example, is it an Interface or Object type?</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __type(name: &quot;Droid&quot;) {</div>
<div class="line">    name</div>
<div class="line">    kind</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><code>kind</code> returns a <code>__TypeKind</code> Enum type, one of whose values is <code>OBJECT</code>. If we asked about <code>Character</code> instead we'd find that it is an Interface type:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __type(name: &quot;Character&quot;) {</div>
<div class="line">    name</div>
<div class="line">    kind</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>It's useful for an Object type to know what fields are available, so let's ask the introspection system about <code>Droid</code>:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __type(name: &quot;Droid&quot;) {</div>
<div class="line">    name</div>
<div class="line">    fields {</div>
<div class="line">      name</div>
<div class="line">      type {</div>
<div class="line">        name</div>
<div class="line">        kind</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Those are the fields that we defined on <code>Droid</code>!</p>
<p><code>id</code> looks a bit weird there, it has no name for the type. That's because it's a <em>wrapper type</em> of kind <code>NON_NULL</code>. If we queried for <code>ofType</code> on that field's type, we would find the <code>ID</code> type there, telling us this is a non-null ID.</p>
<p>Similarly, both <code>friends</code> and <code>appearsIn</code> have no name, since they are the <code>LIST</code> wrapper type. We can query for <code>ofType</code> on those types, which will tell us what types are inside the list:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __type(name: &quot;Droid&quot;) {</div>
<div class="line">    name</div>
<div class="line">    fields {</div>
<div class="line">      name</div>
<div class="line">      type {</div>
<div class="line">        name</div>
<div class="line">        kind</div>
<div class="line">        ofType {</div>
<div class="line">          name</div>
<div class="line">          kind</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Let's end with a feature of the introspection system particularly useful for tooling; let's ask the system for documentation:</p>
<div class="fragment"><div class="line"># { &quot;graphiql&quot;: true }</div>
<div class="line">query {</div>
<div class="line">  __type(name: &quot;Droid&quot;) {</div>
<div class="line">    name</div>
<div class="line">    description</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>As demonstrated above, we can access the documentation about the type system using introspection and create documentation browsers or rich IDE experiences.</p>
<p>This has just scratched the surface of the introspection system; we can query for Enum type values, what Interface types another type implements, and more. We can even introspect on the introspection system itself.</p>
<p>To see an example of a specification-compliant GraphQL query introspection system implemented in code, you can view <a href="https://github.com/graphql/graphql-js/blob/e9b6b626f6f6aa379bb8f8c48df40d0c02a26082/src/type/introspection.ts">src/type/introspection.ts</a> in the reference implementation.</p>
<h2><a class="anchor" id="autotoc_md942"></a>
Introspection in production</h2>
<p>Introspection is a useful feature of GraphQL, especially for client developers and tooling. However, for APIs intended only for your own applications, it’s typically not needed in production—required operations are usually baked into these applications at build time, making runtime introspection unnecessary.</p>
<p>Disabling introspection in production is common in order to reduce the API’s attack surface. This is often part of a broader API security strategy, which may also include authentication and authorization, operation safe-listing (or a range of alternative protections, such as depth-limiting, breadth-limiting, alias limits, cycle rejection, cost analysis, etc.), execution timeouts, and more.</p>
<h2><a class="anchor" id="autotoc_md943"></a>
Next steps</h2>
<p>To recap what we've learned about introspection:</p>
<ul>
<li>Type names can be queried in a field selection set for an Object, Interface, or Union type using the <code>__typename</code> meta-field</li>
<li>Information about the elements of a GraphQL schema can be queried using the <code>__schema</code> field on the <code>query</code> root operation type</li>
<li>Introspection is often disabled in production environments</li>
</ul>
<p>Now that you've explored the GraphQL type system, how to query data from an API, and what the lifecycle of a request looks like, head over to the <a href="../..//learn/best-practices/">Best Practices</a> section to learn more about running GraphQL in production. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
