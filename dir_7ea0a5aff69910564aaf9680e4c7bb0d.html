#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: /github/workspace/ecosystem/ai-tools/nexus Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_7ea0a5aff69910564aaf9680e4c7bb0d.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">nexus Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_9ee7015ee9ab342c705ae89f40ddb09e.html">docs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2><a class="anchor" id="autotoc_md1888"></a>
Nexus - Research Agent</h2>
<p><img src="https://github.com/user-attachments/assets/2be8d59d-f493-4c4f-abef-02eb76ab3af6" alt="Screenshot 2025-08-07 at 12 25 54 PM" width="1728" height="834" class="inline"/></p>
<p>Nexus is a Next.js application that helps students and researchers work with Apache ResilientDB and related distributed systems literature. It provides grounded, citation-backed answers over selected documents and introduces agentic capabilities for research workflows.</p>
<p>The project is built on LlamaIndex for retrieval and workflow orchestration, DeepSeek for reasoning, Gemini embeddings for vectorization, and Postgres with pgvector for storage.</p>
<h3><a class="anchor" id="autotoc_md1889"></a>
What you can do today</h3>
<ul>
<li>Chat over one or more documents with inline citations</li>
<li>Ingest local PDFs to a pgvector index via LlamaParse</li>
<li>Preview PDFs alongside the conversation</li>
<li>Use a ResilientDB-focused agent with retrieval and web search tools</li>
<li>Persist short/long‑term memory per session in Postgres</li>
</ul>
<h3><a class="anchor" id="autotoc_md1890"></a>
Status</h3>
<ul>
<li>Core RAG: implemented</li>
<li>Multi-document ingestion + retrieval: implemented</li>
<li>Agentic chat + memory: in progress</li>
</ul>
<h2><a class="anchor" id="autotoc_md1891"></a>
Quickstart</h2>
<h3><a class="anchor" id="autotoc_md1892"></a>
Prerequisites</h3>
<ul>
<li>Node.js 18.18+ (Node 20+ recommended)</li>
<li>Postgres 14+ with the pgvector extension</li>
<li>Accounts/keys:<ul>
<li>DeepSeek API key</li>
<li>Google Gemini API key</li>
<li>LlamaCloud API key (for LlamaParse JSON mode)</li>
<li>Tavily API key (optional; enables web search tool)</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1893"></a>
1) Create and configure your database</h3>
<p>Ensure pgvector is available in your Postgres instance, then create a database (e.g., <code>nexus</code>) and enable the extension:</p>
<div class="fragment"><div class="line"><span class="keyword">CREATE</span> EXTENSION <span class="keywordflow">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> vector;</div>
</div><!-- fragment --><p>Tables for memory and document embeddings are created automatically on first run.</p>
<h3><a class="anchor" id="autotoc_md1894"></a>
2) Add environment variables</h3>
<p>Create a <code>.env</code> file in the project root:</p>
<div class="fragment"><div class="line">DATABASE_URL=postgres://USER:PASSWORD@localhost:5432/nexus</div>
<div class="line"> </div>
<div class="line"># Must match the embedding model dimension. If you use Gemini Embedding 001, set 768.</div>
<div class="line"># Adjust if you change the embedding model.</div>
<div class="line">EMBEDDING_DIM=768</div>
<div class="line"> </div>
<div class="line">DEEPSEEK_API_KEY=your_deepseek_key</div>
<div class="line">DEEPSEEK_MODEL=deepseek-chat</div>
<div class="line"> </div>
<div class="line"># Required for LlamaParse JSON mode used during ingestion</div>
<div class="line">LLAMA_CLOUD_API_KEY=your_llamacloud_key</div>
<div class="line">LLAMA_CLOUD_PROJECT_NAME=</div>
<div class="line">LLAMA_CLOUD_INDEX_NAME=</div>
<div class="line">LLAMA_CLOUD_BASE_URL=</div>
<div class="line"> </div>
<div class="line"># Optional but recommended for web search tool</div>
<div class="line">TAVILY_API_KEY=</div>
<div class="line"> </div>
<div class="line"># Embeddings</div>
<div class="line">GEMINI_API_KEY=your_gemini_key</div>
</div><!-- fragment --><p>Note: <code>EMBEDDING_DIM</code> must match your embedding model. With <code>Gemini Embedding 001</code> it is typically 768. If you switch models, update this value accordingly.</p>
<h3><a class="anchor" id="autotoc_md1895"></a>
3) Install and run</h3>
<div class="fragment"><div class="line">npm install</div>
<div class="line">npm run dev</div>
</div><!-- fragment --><p>Visit <code><a href="http://localhost:3000/research">http://localhost:3000/research</a></code>.</p>
<h3><a class="anchor" id="autotoc_md1896"></a>
4) Add documents</h3>
<p>Place your PDFs (and optionally DOC/DOCX/PPT/PPTX) in the <code>documents/</code> folder at the repo root. The app will list them in the sidebar. Select one or more, then Nexus will parse and index them on demand.</p>
<h2><a class="anchor" id="autotoc_md1897"></a>
How it works</h2>
<h3><a class="anchor" id="autotoc_md1898"></a>
Architecture (high level)</h3>
<ul>
<li>UI: Next.js App Router (<code>/research</code>) with a chat panel and a preview panel</li>
<li>Retrieval and ingestion: LlamaIndex pipeline with SentenceSplitter, SummaryExtractor, and Gemini embeddings stored in Postgres pgvector</li>
<li>Agent: LlamaIndex workflow with DeepSeek as the LLM, two main tools:<ul>
<li><code>search_documents</code>: queries the local vector index filtered by the selected documents</li>
<li><code>search_web</code>: optional Tavily-backed web search</li>
</ul>
</li>
<li>Memory: session‑scoped short/long‑term memory persisted to pgvector</li>
<li>Streaming: server streams model deltas; client renders responses and citations in real time</li>
</ul>
<h3><a class="anchor" id="autotoc_md1899"></a>
Endpoints</h3>
<ul>
<li><code>GET /api/research/documents</code> — lists available files in <code>documents/</code></li>
<li><code>GET /api/research/files/[...path]</code> — serves files from <code>documents/</code> for preview</li>
<li><code>POST /api/research/prepare-index</code> — parses and ingests selected files to the vector index (LlamaParse JSON mode)</li>
<li><code>POST /api/research/chat</code> — runs the ResilientDB agent with retrieval/memory and streams the response</li>
</ul>
<h3><a class="anchor" id="autotoc_md1900"></a>
Session memory</h3>
<p>Each chat session is identified by a <code>?session=&lt;uuid&gt;</code> query param. The agent attaches a memory that persists across turns for that session and stores long‑term facts in pgvector.</p>
<h3><a class="anchor" id="autotoc_md1901"></a>
Citations</h3>
<p>Model responses use <code>[^id]</code> inline markers. The UI renders them as badges with source titles and page numbers when available.</p>
<h2><a class="anchor" id="autotoc_md1902"></a>
Using the app</h2>
<ol type="1">
<li>Add PDFs to <code>documents/</code>.</li>
<li>Start the app and open <code>/research</code>.</li>
<li>Select documents in the sidebar. The app will prepare an index for the selection.</li>
<li>Ask questions. The agent retrieves from the selected documents first, and may use web search if needed.</li>
<li>Toggle Code Composer to draft code grounded in the selected papers (experimental).</li>
</ol>
<h2><a class="anchor" id="autotoc_md1903"></a>
Configuration reference</h2>
<p>Environment variables from <code>src/config/environment.ts</code>:</p>
<ul>
<li><code>DATABASE_URL</code>: Postgres connection string</li>
<li><code>EMBEDDING_DIM</code>: embedding dimensionality used to initialize pgvector tables</li>
<li><code>DEEPSEEK_API_KEY</code>: required for DeepSeek LLM</li>
<li><code>DEEPSEEK_MODEL</code>: <code>deepseek-chat</code> or <code>deepseek-coder</code></li>
<li><code>LLAMA_CLOUD_API_KEY</code>: required for LlamaParse JSON parsing during ingestion</li>
<li><code>LLAMA_CLOUD_PROJECT_NAME</code>, <code>LLAMA_CLOUD_INDEX_NAME</code>, <code>LLAMA_CLOUD_BASE_URL</code>: optional, reserved for future cloud indexing</li>
<li><code>TAVILY_API_KEY</code>: optional, enables the web search tool</li>
<li><code>GEMINI_API_KEY</code>: required for Gemini embeddings</li>
</ul>
<p>If you change the embedding model, ensure <code>EMBEDDING_DIM</code> matches it and re‑create the vector tables if needed.</p>
<h2><a class="anchor" id="autotoc_md1904"></a>
Scripts</h2>
<ul>
<li><code>npm run dev</code> — start the Next.js dev server</li>
<li><code>npm run build</code> — build for production</li>
<li><code>npm run start</code> — start the production server</li>
<li><code>npm run lint</code> — lint the codebase</li>
</ul>
<h2><a class="anchor" id="autotoc_md1905"></a>
Tech stack</h2>
<ul>
<li>Next.js 15, React 19, TypeScript</li>
<li>TailwindCSS, Radix UI primitives</li>
<li>LlamaIndex (agents, ingestion pipeline, retriever)</li>
<li>DeepSeek (LLM), Gemini embeddings</li>
<li>Postgres + pgvector</li>
<li>Tavily (optional web search)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1906"></a>
Notes</h2>
<ul>
<li>This project is intended for educational and research use around Apache ResilientDB and related systems. Use appropriate discretion when interpreting generated code. </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9adcdd408e7d46583ab3f2dc398d1e69.html">ecosystem</a></li><li class="navelem"><a class="el" href="dir_9161d0b38cbb204466a01e93deb98c86.html">ai-tools</a></li><li class="navelem"><a class="el" href="dir_7ea0a5aff69910564aaf9680e4c7bb0d.html">nexus</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
