#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 08_resilientdb_configuration</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('df/dca/md__2github_2workspace_2ecosystem_2ai-tools_2beacon_2content_2resilientdb_2chapters_208__resilientdb__configuration.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">08_resilientdb_configuration</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr  />
<p> layout: default title: 'Chapter 8: ResilientDB Configuration' parent: 'ResilientDB' </p>
<h2><a class="anchor" id="autotoc_md156"></a>
nav_order: 8</h2>
<h1><a class="anchor" id="autotoc_md157"></a>
Chapter 8: ResilientDB Configuration</h1>
<p>You've journeyed through the heart of ResilientDB! We started with how applications talk to the system ([Chapter 1: Client Interaction](01_client_interaction)), how messages travel ([Chapter 2: Network Communication](02_network_communication)), how agreement is reached ([Chapter 3: Consensus Management](03_consensus_management)), how messages are organized ([Chapter 4: Message/Transaction Collection](04_message_transaction_collection)), how transactions are executed ([Chapter 5: <a class="el" href="../../df/d28/classTransaction.html">Transaction</a> Execution](05_transaction_execution)), how data is stored ([Chapter 6: Storage Layer](06_storage_layer)), and how the system saves progress and recovers from crashes ([Chapter 7: Checkpointing &amp; Recovery](07_checkpointing)).</p>
<p>Now, think about setting up a new ResilientDB network or connecting a client to an existing one. How does a replica know which other computers are part of the network? How does a client know where to send its requests? How does the system know which security keys to use, or how long to wait for consensus messages?</p>
<p>Welcome to the final chapter of our core concepts tour! We'll explore <b>ResilientDB Configuration</b>, managed primarily through the <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object.</p>
<h2><a class="anchor" id="autotoc_md158"></a>
Why Do We Need Configuration?</h2>
<p>Imagine you're setting up a new computer game to play online with friends. Before you can start, you need to configure some settings:</p>
<ul>
<li>What's your username?</li>
<li>What are the server addresses of your friends' games?</li>
<li>What are the game rules (difficulty level, time limits)?</li>
</ul>
<p>Similarly, before a ResilientDB node (replica) or client can start working, it needs initial setup instructions. It needs to know:</p>
<ul>
<li>Who are the other participants (replicas) in the network?</li>
<li>How can I identify myself securely?</li>
<li>What are the "rules of engagement" for communication and agreement?</li>
</ul>
<p>This setup information is provided through <b>configuration</b>.</p>
<h2><a class="anchor" id="autotoc_md159"></a>
Meet the Settings Menu: <code>ResDBConfig</code></h2>
<p>The <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object acts like the central <b>settings menu</b> for a ResilientDB node or client. It holds all the crucial parameters needed to start up and participate correctly.</p>
<p><b>Analogy:</b> Think of <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> as the sheet of instructions and addresses you'd give to a new team member joining a project. It tells them who else is on the team, their contact details, the project deadlines, and the procedures to follow.</p>
<p>Without this configuration, a node would be isolated and wouldn't know how to connect, communicate, or participate in the consensus process.</p>
<h2><a class="anchor" id="autotoc_md160"></a>
What's Inside the Settings Menu (<code>ResDBConfig</code>)?</h2>
<p>The <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object bundles several key pieces of information:</p>
<ol type="1">
<li><p class="startli"><b>Who are the participants? (<code>replicas_</code>, <code>self_info_</code>)</b></p><ul>
<li>It contains a list of <code>ReplicaInfo</code> objects. Each <code>ReplicaInfo</code> stores the network address (IP and port) and ID of one replica in the system.</li>
<li>It also stores the <code>ReplicaInfo</code> for the current node itself (<code>self_info_</code>). This tells the node its own identity and listening address.</li>
</ul>
<p class="startli"><code>protobuf // Simplified from platform/proto/replica_info.proto message ReplicaInfo { int32 id = 1; // Unique ID for the replica string ip = 2; // IP address (e.g., "192.168.1.100") int32 port = 3; // Port number (e.g., 12345) // CertificateInfo certificate_info = 4; // Public key/cert (optional) } </code></p><ul>
<li><b>Why?</b> This allows components like the ReplicaCommunicator to know where to send messages and the ServiceNetwork to know where to listen.</li>
</ul>
</li>
<li><p class="startli"><b>How do I identify myself securely? (<code>private_key_</code>, <code>public_key_cert_info_</code>)</b></p><ul>
<li>It holds the node's <b>private key</b> (<code>KeyInfo</code>). This is kept secret and used to digitally sign outgoing messages, proving they came from this node.</li>
<li>It often holds the node's <b>public key certificate</b> (<code>CertificateInfo</code>). This contains the public key (which corresponds to the private key) and information verifying the node's identity. This certificate can be shared so others can verify the node's signatures.</li>
</ul>
<p class="startli">```protobuf // Simplified from common/proto/signature_info.proto message KeyInfo { bytes key = 1; // The actual private key data enum Type { ... } type = 2; // Type of key (e.g., RSA, ED25519) // ... other fields ... }</p>
<p class="startli">message CertificateInfo { // Contains PublicKeyInfo (ID, IP, Port, Public Key) // and potentially signatures from a Certificate Authority // ... details omitted ... } ```</p><ul>
<li><b>Why?</b> This is crucial for security. Signatures prevent others from impersonating a node and ensure message integrity, which is vital for consensus algorithms like PBFT (Chapter 3).</li>
</ul>
</li>
<li><p class="startli"><b>What are the rules of the game? (<code>config_data_</code>)</b></p><ul>
<li>This holds a <code>ResConfigData</code> object, which contains many operational parameters:<ul>
<li><b>Consensus Settings:</b> Timeouts for various phases (like view changes), batch sizes for transactions, number of worker threads.</li>
<li><b>Fault Tolerance:</b> The configuration implicitly defines <code>f</code>, the maximum number of faulty replicas the system can tolerate. <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> calculates values like <code>2f+1</code> (<code>GetMinDataReceiveNum</code>) needed for PBFT voting thresholds.</li>
<li><b>Feature Flags:</b> Enable/disable features like checkpointing (Chapter 7), signature verification, performance monitoring.</li>
<li><b>Checkpointing:</b> How often to take checkpoints (<code>checkpoint_water_mark_</code>), where to store logs (<code>checkpoint_logging_path_</code>).</li>
</ul>
</li>
</ul>
<p class="startli"><code>cpp // Simplified from <a class="el" href="../../d0/d41/resdb__config_8cpp.html">platform/config/resdb_config.cpp</a> int <a class="el" href="../../d6/d06/classResDBConfig.html#a288793f30d8165a26089e157f87b0631">ResDBConfig::GetMinDataReceiveNum() const </a>{ // Calculate 'f', the max faulty nodes allowed int f = (replicas_.size() - 1) / 3; // PBFT requires 2f+1 votes for agreement (must be at least 1) return std::max(2 * f + 1, 1); } </code></p><ul>
<li><b>Why?</b> These parameters tune the performance, resilience, and behavior of the ResilientDB network. They define how the different components we've discussed should operate.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md161"></a>
Setting Up: Loading the Configuration</h2>
<p>How does the <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object get filled with all this information? Usually, it's loaded from files when a node or client starts up.</p>
<ol type="1">
<li><b>The Config Files:</b><ul>
<li><b>Replica List (<code>config.config</code> or similar):</b> A simple text file listing the ID, IP, and port of each replica. <code> @section autotoc_md162 Example config.config 0 127.0.0.1 12345 1 127.0.0.1 12346 2 127.0.0.1 12347 3 127.0.0.1 12348 </code></li>
<li><b>Main Configuration (<code>config.json</code>):</b> A JSON file containing more detailed settings, including performance parameters, feature flags, and potentially replica info grouped by region. <code>json // Example simplified config.json fragment { "self_region_id": 1, "region": [ { "region_id": 1, "replica_info": [ { "id": 0, "ip": "127.0.0.1", "port": 12345 }, { "id": 1, "ip": "127.0.0.1", "port": 12346 }, { "id": 2, "ip": "127.0.0.1", "port": 12347 }, { "id": 3, "ip": "127.0.0.1", "port": 12348 } ] } ], "max_process_txn": 1024, "view_change_timeout_ms": 30000, "is_performance_running": false } </code></li>
<li><b>Key/Certificate Files:</b> Separate binary files containing the node's private key (<code>private.key</code>) and certificate (<code>cert.cert</code>).</li>
</ul>
</li>
<li><p class="startli"><b>Helper Functions (<code><a class="el" href="../../d7/d97/resdb__config__utils_8cpp.html">resdb_config_utils.cpp</a></code>):</b> ResilientDB provides utility functions to read these files and create the <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object.</p>
<p class="startli">```cpp // Simplified from <a class="el" href="../../d7/d97/resdb__config__utils_8cpp.html">platform/config/resdb_config_utils.cpp</a></p>
<p class="startli">// Reads the simple ID IP Port format std::vector&lt;ReplicaInfo&gt; <a class="el" href="../../de/dd6/pow__server_8cpp.html#a67842a19269800fb4efcff8d4082118b">ReadConfig(const std::string&amp; file_name)</a> { std::vector&lt;ReplicaInfo&gt; replicas; std::ifstream infile(file_name.c_str()); int id; std::string ip; int port; while (infile &gt;&gt; id &gt;&gt; ip &gt;&gt; port) { // Read line by line ReplicaInfo info; info.set_id(id); info.set_ip(ip); info.set_port(port); replicas.push_back(info); } // ... error checking ... return replicas; }</p>
<p class="startli">// Reads the JSON config file ResConfigData <a class="el" href="../../d4/d30/utxo__service_8cpp.html#ad61cfeaeddea3145878c30f59ebd48cc">ReadConfigFromFile(const std::string&amp; file_name)</a> { std::ifstream infile(file_name.c_str()); std::stringstream json_data; json_data &lt;&lt; infile.rdbuf(); // Read whole file</p>
<p class="startli">ResConfigData config_data; // The protobuf message to fill google::protobuf::util::JsonStringToMessage(json_data.str(), &amp;config_data); // ... error checking ... return config_data; }</p>
<p class="startli">// Reads key/cert files (simplified) KeyInfo <a class="el" href="../../d2/dca/certificate__tools_8cpp.html#ac57862d3b3731f6987373443dd5127bd">ReadKey(const std::string&amp; file_name)</a> { /* ... reads binary file ... */ } CertificateInfo ReadCert(const std::string&amp; file_name) { /* ... reads binary file ... */ }</p>
<p class="startli">// Puts it all together std::unique_ptr&lt;ResDBConfig&gt; GenerateResDBConfig( const std::string&amp; config_file, // JSON file const std::string&amp; private_key_file, const std::string&amp; cert_file) {</p>
<p class="startli">ResConfigData config_data = ReadConfigFromFile(config_file); KeyInfo private_key = ReadKey(private_key_file); CertificateInfo cert_info = ReadCert(cert_file);</p>
<p class="startli">// Extract self info (ID, IP, Port) from the certificate ReplicaInfo self_info; self_info.set_id(cert_info.public_key().public_key_info().node_id()); self_info.set_ip(cert_info.public_key().public_key_info().ip()); self_info.set_port(cert_info.public_key().public_key_info().port()); *self_info.mutable_certificate_info() = cert_info; // Embed cert in self_info</p>
<p class="startli">// Create the <a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a> object using a constructor return std::make_unique&lt;ResDBConfig&gt;(config_data, self_info,
                                          private_key, cert_info); } ```</p>
<p class="startli">This code shows functions reading the different file types (text list, JSON, binary keys) and using the data to construct a <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object.</p>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md163"></a>
Using the Configuration</h2>
<p>Once created, the <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object is passed around to many other components when they are initialized.</p>
<ul>
<li><p class="startli"><b>Clients (Chapter 1):</b></p>
<div class="fragment"><div class="line"><span class="comment">// Simplified client creation</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d4/d9a/resdb__config_8h.html">platform/config/resdb_config.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d48/kv__client_8h.html">interface/kv/kv_client.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a> client_config = <a class="code hl_function" href="../../d7/da6/pybind__kv__service_8cpp.html#aae9011388f6fd7b287566f37e31660fa">GenerateResDBConfig</a>(<span class="stringliteral">&quot;config.config&quot;</span>); <span class="comment">// Load replica list</span></div>
<div class="line"><a class="code hl_class" href="../../d4/dbb/classresdb_1_1KVClient.html">resdb::KVClient</a> kv_client(client_config); <span class="comment">// Pass config to client</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// kv_client now knows replica addresses from client_config</span></div>
<div class="ttc" id="aclassResDBConfig_html"><div class="ttname"><a href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/d9a/resdb__config_8h_source.html#l00028">resdb_config.h:28</a></div></div>
<div class="ttc" id="aclassresdb_1_1KVClient_html"><div class="ttname"><a href="../../d4/dbb/classresdb_1_1KVClient.html">resdb::KVClient</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d48/kv__client_8h_source.html#l00028">kv_client.h:28</a></div></div>
<div class="ttc" id="akv__client_8h_html"><div class="ttname"><a href="../../d8/d48/kv__client_8h.html">kv_client.h</a></div></div>
<div class="ttc" id="apybind__kv__service_8cpp_html_aae9011388f6fd7b287566f37e31660fa"><div class="ttname"><a href="../../d7/da6/pybind__kv__service_8cpp.html#aae9011388f6fd7b287566f37e31660fa">GenerateResDBConfig</a></div><div class="ttdeci">std::unique_ptr&lt; ResDBConfig &gt; GenerateResDBConfig(const std::string &amp;config_file, const std::string &amp;private_key_file, const std::string &amp;cert_file, std::optional&lt; ReplicaInfo &gt; self_info, std::optional&lt; ConfigGenFunc &gt; gen_func)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d97/resdb__config__utils_8cpp_source.html#l00155">resdb_config_utils.cpp:155</a></div></div>
<div class="ttc" id="aresdb__config_8h_html"><div class="ttname"><a href="../../d4/d9a/resdb__config_8h.html">resdb_config.h</a></div></div>
</div><!-- fragment --><p class="startli">The client uses <code>config.GetReplicaInfos()</code> to know where to send requests.</p>
</li>
<li><p class="startli"><b>Network Components (Chapter 2):</b></p>
<div class="fragment"><div class="line"><span class="comment">// Simplified setup</span></div>
<div class="line"><a class="code hl_class" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a> node_config = <a class="code hl_function" href="../../d7/da6/pybind__kv__service_8cpp.html#aae9011388f6fd7b287566f37e31660fa">GenerateResDBConfig</a>(<span class="comment">/* JSON, key, cert files */</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ReplicaCommunicator needs addresses of others</span></div>
<div class="line">ReplicaCommunicator comm(node_config, <span class="comment">/* ... */</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ServiceNetwork needs own listening address</span></div>
<div class="line"><a class="code hl_class" href="../../d7/d96/classServiceNetwork.html">ServiceNetwork</a> service(node_config, <span class="comment">/* service handler */</span>);</div>
<div class="line">service.Run();</div>
<div class="ttc" id="aclassServiceNetwork_html"><div class="ttname"><a href="../../d7/d96/classServiceNetwork.html">ServiceNetwork</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d22/service__network_8h_source.html#l00038">service_network.h:38</a></div></div>
</div><!-- fragment --><p class="startli"><code>ReplicaCommunicator</code> uses <code>node_config.GetReplicaInfos()</code> and <code><a class="el" href="../../d7/d96/classServiceNetwork.html">ServiceNetwork</a></code> uses <code>node_config.GetSelfInfo()</code>.</p>
</li>
<li><p class="startli"><b>Consensus (Chapter 3):</b></p>
<div class="fragment"><div class="line"><span class="comment">// Simplified setup</span></div>
<div class="line"><a class="code hl_class" href="../../d3/d20/classConsensusManagerPBFT.html">ConsensusManagerPBFT</a> consensus_manager(node_config, <span class="comment">/* executor, etc. */</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Inside consensus logic...</span></div>
<div class="line"><span class="keywordtype">int</span> required_votes = node_config.<a class="code hl_function" href="../../d6/d06/classResDBConfig.html#a288793f30d8165a26089e157f87b0631">GetMinDataReceiveNum</a>(); <span class="comment">// Gets 2f+1</span></div>
<div class="line"><span class="comment">// Check if enough votes received...</span></div>
<div class="ttc" id="aclassConsensusManagerPBFT_html"><div class="ttname"><a href="../../d3/d20/classConsensusManagerPBFT.html">ConsensusManagerPBFT</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d6c/consensus__manager__pbft_8h_source.html#l00036">consensus_manager_pbft.h:36</a></div></div>
<div class="ttc" id="aclassResDBConfig_html_a288793f30d8165a26089e157f87b0631"><div class="ttname"><a href="../../d6/d06/classResDBConfig.html#a288793f30d8165a26089e157f87b0631">ResDBConfig::GetMinDataReceiveNum</a></div><div class="ttdeci">int GetMinDataReceiveNum() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00119">resdb_config.cpp:119</a></div></div>
</div><!-- fragment --><p class="startli">The <code>ConsensusManager</code> uses the config to get crucial values like the number of required votes (<code>2f+1</code>) and timeouts.</p>
</li>
</ul>
<p>The <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object acts as a read-only container passed to components needing setup parameters.</p>
<h2><a class="anchor" id="autotoc_md164"></a>
Code Glimpse: The <code>ResDBConfig</code> Class</h2>
<p>Let's look at the structure of the class itself.</p>
<div class="fragment"><div class="line"><span class="comment">// Simplified from platform/config/resdb_config.h</span></div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d5/d10/namespaceresdb.html">resdb</a> {</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a> {</div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  <span class="comment">// Constructor taking detailed data (often called by GenerateResDBConfig)</span></div>
<div class="line">  <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#ae104228f4beabff79900152b8b78271f">ResDBConfig</a>(<span class="keyword">const</span> ResConfigData&amp; config_data, <span class="keyword">const</span> ReplicaInfo&amp; self_info,</div>
<div class="line">              <span class="keyword">const</span> KeyInfo&amp; private_key,</div>
<div class="line">              <span class="keyword">const</span> CertificateInfo&amp; public_key_cert_info);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// --- Getters for the stored information ---</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get the list of all replica addresses/IDs</span></div>
<div class="line">  <span class="keyword">const</span> std::vector&lt;ReplicaInfo&gt;&amp; <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#ae5e1d332c3af26e735f2a5005a78c00d">GetReplicaInfos</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get this node&#39;s own address/ID/certificate</span></div>
<div class="line">  <span class="keyword">const</span> ReplicaInfo&amp; <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a8c6b178bc0fd3efd488456907dbecbd6">GetSelfInfo</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get this node&#39;s secret private key</span></div>
<div class="line">  KeyInfo <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#af5d58d6f8f9eb0098241bca27f46377c">GetPrivateKey</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get the detailed parameters from ResConfigData</span></div>
<div class="line">  ResConfigData <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a464cd1a715b8e103a24e17e43306c010">GetConfigData</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// --- Calculated Values ---</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get total number of replicas (N)</span></div>
<div class="line">  <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a3ecbc743465c10c809b9d9e0daf272df">GetReplicaNum</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get minimum votes needed for PBFT agreement (2f+1)</span></div>
<div class="line">  <span class="keywordtype">int</span> <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a288793f30d8165a26089e157f87b0631">GetMinDataReceiveNum</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get minimum votes needed for client responses (f+1)</span></div>
<div class="line">  <span class="keywordtype">int</span> <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a2f169bcf96c9d9aab1ba06e204658a87">GetMinClientReceiveNum</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Get max faulty replicas tolerated (f)</span></div>
<div class="line">  <span class="keywordtype">size_t</span> <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a76f1ddcf02a3467b79bcf871347f4231">GetMaxMaliciousReplicaNum</a>() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// --- Other settings ---</span></div>
<div class="line">  <span class="keywordtype">int</span> <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#adac6ea8534b37765a76383ded84b5e14">GetClientTimeoutMs</a>() <span class="keyword">const</span>;</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code hl_function" href="../../db/ddb/classresdb_1_1ResDBConfig.html#a5c45af267e01911ef108fd6055e9dadd">GetCheckPointWaterMark</a>() <span class="keyword">const</span>;</div>
<div class="line">  <span class="comment">// ... many more getters for timeouts, flags, paths, etc. ...</span></div>
<div class="line"> </div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  <span class="comment">// The actual data members storing the configuration</span></div>
<div class="line">  ResConfigData config_data_;</div>
<div class="line">  std::vector&lt;ReplicaInfo&gt; replicas_;</div>
<div class="line">  ReplicaInfo self_info_;</div>
<div class="line">  KeyInfo private_key_;</div>
<div class="line">  CertificateInfo public_key_cert_info_;</div>
<div class="line">  <span class="comment">// ... other member variables for settings not in ResConfigData ...</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace resdb</span></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a288793f30d8165a26089e157f87b0631"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a288793f30d8165a26089e157f87b0631">resdb::ResDBConfig::GetMinDataReceiveNum</a></div><div class="ttdeci">int GetMinDataReceiveNum() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00119">resdb_config.cpp:119</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a2f169bcf96c9d9aab1ba06e204658a87"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a2f169bcf96c9d9aab1ba06e204658a87">resdb::ResDBConfig::GetMinClientReceiveNum</a></div><div class="ttdeci">int GetMinClientReceiveNum() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00124">resdb_config.cpp:124</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a3ecbc743465c10c809b9d9e0daf272df"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a3ecbc743465c10c809b9d9e0daf272df">resdb::ResDBConfig::GetReplicaNum</a></div><div class="ttdeci">size_t GetReplicaNum() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00117">resdb_config.cpp:117</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a464cd1a715b8e103a24e17e43306c010"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a464cd1a715b8e103a24e17e43306c010">resdb::ResDBConfig::GetConfigData</a></div><div class="ttdeci">ResConfigData GetConfigData() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00109">resdb_config.cpp:109</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a5c45af267e01911ef108fd6055e9dadd"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a5c45af267e01911ef108fd6055e9dadd">resdb::ResDBConfig::GetCheckPointWaterMark</a></div><div class="ttdeci">int GetCheckPointWaterMark() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00154">resdb_config.cpp:154</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a76f1ddcf02a3467b79bcf871347f4231"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a76f1ddcf02a3467b79bcf871347f4231">resdb::ResDBConfig::GetMaxMaliciousReplicaNum</a></div><div class="ttdeci">size_t GetMaxMaliciousReplicaNum() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00134">resdb_config.cpp:134</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_a8c6b178bc0fd3efd488456907dbecbd6"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#a8c6b178bc0fd3efd488456907dbecbd6">resdb::ResDBConfig::GetSelfInfo</a></div><div class="ttdeci">const ReplicaInfo &amp; GetSelfInfo() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00115">resdb_config.cpp:115</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_adac6ea8534b37765a76383ded84b5e14"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#adac6ea8534b37765a76383ded84b5e14">resdb::ResDBConfig::GetClientTimeoutMs</a></div><div class="ttdeci">int GetClientTimeoutMs() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00143">resdb_config.cpp:143</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_ae104228f4beabff79900152b8b78271f"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#ae104228f4beabff79900152b8b78271f">resdb::ResDBConfig::ResDBConfig</a></div><div class="ttdeci">ResDBConfig(const std::vector&lt; ReplicaInfo &gt; &amp;replicas, const ReplicaInfo &amp;self_info, ResConfigData config_data=ResConfigData())</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00026">resdb_config.cpp:26</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_ae5e1d332c3af26e735f2a5005a78c00d"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#ae5e1d332c3af26e735f2a5005a78c00d">resdb::ResDBConfig::GetReplicaInfos</a></div><div class="ttdeci">const std::vector&lt; ReplicaInfo &gt; &amp; GetReplicaInfos() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00111">resdb_config.cpp:111</a></div></div>
<div class="ttc" id="aclassresdb_1_1ResDBConfig_html_af5d58d6f8f9eb0098241bca27f46377c"><div class="ttname"><a href="../../db/ddb/classresdb_1_1ResDBConfig.html#af5d58d6f8f9eb0098241bca27f46377c">resdb::ResDBConfig::GetPrivateKey</a></div><div class="ttdeci">KeyInfo GetPrivateKey() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00103">resdb_config.cpp:103</a></div></div>
<div class="ttc" id="anamespaceresdb_html"><div class="ttname"><a href="../../d5/d10/namespaceresdb.html">resdb</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/d85/chain__state_8cpp_source.html#l00024">chain_state.cpp:24</a></div></div>
</div><!-- fragment --><p>The header shows the constructors used to create the object and various <code>Get...</code> methods that components call to retrieve the configuration values they need. The actual data is stored in private member variables.</p>
<div class="fragment"><div class="line"><span class="comment">// Simplified constructor from platform/config/resdb_config.cpp</span></div>
<div class="line"><a class="code hl_function" href="../../d6/d06/classResDBConfig.html#ae104228f4beabff79900152b8b78271f">ResDBConfig::ResDBConfig</a>(<span class="keyword">const</span> ResConfigData&amp; config_data,</div>
<div class="line">                         <span class="keyword">const</span> ReplicaInfo&amp; self_info,</div>
<div class="line">                         <span class="keyword">const</span> KeyInfo&amp; private_key,</div>
<div class="line">                         <span class="keyword">const</span> CertificateInfo&amp; public_key_cert_info)</div>
<div class="line">    : config_data_(config_data),      <span class="comment">// Copy the ResConfigData parameters</span></div>
<div class="line">      self_info_(self_info),          <span class="comment">// Copy this node&#39;s info</span></div>
<div class="line">      private_key_(private_key),      <span class="comment">// Copy the private key</span></div>
<div class="line">      public_key_cert_info_(public_key_cert_info) <span class="comment">// Copy the certificate</span></div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Extract the replica list from the ResConfigData based on self_region_id</span></div>
<div class="line">  replicas_.clear();</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; region : config_data.region()) {</div>
<div class="line">    if (region.region_id() == config_data.self_region_id()) {</div>
<div class="line">      for (const auto&amp; replica : region.replica_info()) {</div>
<div class="line">        replicas_.push_back(replica); <span class="comment">// Add replicas from my region</span></div>
<div class="line">      }</div>
<div class="line">      break;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Set default values for some parameters if they weren&#39;t in config_data</span></div>
<div class="line">  <span class="keywordflow">if</span> (config_data_.view_change_timeout_ms() == 0) {</div>
<div class="line">    config_data_.set_view_change_timeout_ms(<span class="comment">/* default value */</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// ... set other defaults ...</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassResDBConfig_html_ae104228f4beabff79900152b8b78271f"><div class="ttname"><a href="../../d6/d06/classResDBConfig.html#ae104228f4beabff79900152b8b78271f">ResDBConfig::ResDBConfig</a></div><div class="ttdeci">ResDBConfig(const std::vector&lt; ReplicaInfo &gt; &amp;replicas, const ReplicaInfo &amp;self_info, ResConfigData config_data=ResConfigData())</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d41/resdb__config_8cpp_source.html#l00026">resdb_config.cpp:26</a></div></div>
</div><!-- fragment --><p>The constructor initializes the member variables from the passed-in data. It also handles extracting the correct replica list from the potentially region-based <code>ResConfigData</code> and sets sensible defaults for parameters if they are missing.</p>
<h2><a class="anchor" id="autotoc_md165"></a>
Conclusion</h2>
<p>You've now learned about <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code>, the essential <b>settings menu</b> for ResilientDB.</p>
<ul>
<li>It holds crucial setup information: <b>network addresses</b> (<code>ReplicaInfo</code>), <b>security keys</b> (<code>KeyInfo</code>, <code>CertificateInfo</code>), and <b>operational parameters</b> (<code>ResConfigData</code>).</li>
<li>It's typically loaded from <b>configuration files</b> (text, JSON, binary keys) using helper functions when a node or client starts.</li>
<li>The <code><a class="el" href="../../d6/d06/classResDBConfig.html">ResDBConfig</a></code> object is passed to various components during initialization, providing them with the necessary parameters to function correctly within the ResilientDB network.</li>
</ul>
<p>This concludes our tour of the core concepts behind <code>incubator-resilientdb</code>. From sending a client request to configuring the entire network, you now have a foundational understanding of how the main pieces fit together. While each component has much more depth, this overview should provide a solid starting point for further exploration or contribution!</p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
